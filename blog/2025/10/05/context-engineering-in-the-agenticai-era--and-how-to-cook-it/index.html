
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A comprehensive guide to designing, evaluating, and shipping the context layer for agentic AI systems ‚Äî with deep dives into degradation patterns, compression strategies, optimization techniques, and agent skills.">
      
      
        <meta name="author" content="Viacheslav Dubrov">
      
      
        <link rel="canonical" href="https://slavadubrov.github.io/blog/2025/10/05/context-engineering-in-the-agenticai-era--and-how-to-cook-it/">
      
      
        <link rel="prev" href="../../../06/10/building-a-custom-featurestorelite-mcp-server-using-uv/">
      
      
        <link rel="next" href="../../20/domain-driven-design-for-ai-agents-a-beginner-friendly-guide/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../../../assets/favicon-eoc.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.23">
    
    
      
        <title>Context Engineering in the Agentic‚ÄëAI Era ‚Äî and How to Cook It - Edge of Context: Practical AI Engineering</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.84d31ad4.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/brand.css">
    
      <link rel="stylesheet" href="../../../../../assets/blog-sidebar.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
     
<style>
  /* Header social icons */
  .md-header__social {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-left: 0.5rem;
  }
  .md-header__social a {
    color: var(--md-primary-bg-color);
    opacity: 0.7;
    transition: opacity 0.2s;
  }
  .md-header__social a:hover {
    opacity: 1;
  }
  .md-header__social svg {
    width: 1.2rem;
    height: 1.2rem;
    fill: currentColor;
  }
  /* Adjust search to make room for social icons */
  .md-search {
    margin-right: 0;
  }
</style>

  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#context-engineering-in-the-agenticai-era-and-how-to-cook-it" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
     
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="Edge of Context: Practical AI Engineering" class="md-header__button md-logo" aria-label="Edge of Context: Practical AI Engineering" data-md-component="logo">
      
  <img src="../../../../../assets/logo-eoc.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Edge of Context: Practical AI Engineering
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Context Engineering in the Agentic‚ÄëAI Era ‚Äî and How to Cook It
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../../" class="md-tabs__link">
          
  
  
    
  
  Blog

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../../about/" class="md-tabs__link">
        
  
  
    
  
  About

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
<script>
  // Inject social icons into header after DOM loads
  document.addEventListener("DOMContentLoaded", function () {
    const header = document.querySelector(".md-header__inner");
    if (header) {
      const social = document.createElement("div");
      social.className = "md-header__social";
      social.innerHTML = `
      <a href="https://www.linkedin.com/in/slavadubrov" title="LinkedIn" target="_blank" rel="noopener">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>
      </a>
      <a href="https://slavadubrov.substack.com/" title="Substack" target="_blank" rel="noopener">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22.539 8.242H1.46V5.406h21.08v2.836zM1.46 10.812V24L12 18.11 22.54 24V10.812H1.46zM22.54 0H1.46v2.836h21.08V0z"/></svg>
      </a>
      <a href="https://github.com/slavadubrov" title="GitHub" target="_blank" rel="noopener">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    `;
      header.appendChild(social);
    }
  });
</script>

    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Edge of Context: Practical AI Engineering" class="md-nav__button md-logo" aria-label="Edge of Context: Practical AI Engineering" data-md-component="logo">
      
  <img src="../../../../../assets/logo-eoc.svg" alt="logo">

    </a>
    Edge of Context: Practical AI Engineering
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Blog
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Blog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Archive
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2026/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2026
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../archive/2025/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2025
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Topics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/ai-engineering/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    AI Engineering
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/agentic-ai/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agentic AI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/agents-101/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agents 101
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/infrastructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Infrastructure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/paper-review/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Paper Review
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/python/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Python
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../../category/tooling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tooling
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../about/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    About
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#tldr" class="md-nav__link">
    <span class="md-ellipsis">
      TL;DR
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-now" class="md-nav__link">
    <span class="md-ellipsis">
      Why now
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#key-concepts-for-beginners" class="md-nav__link">
    <span class="md-ellipsis">
      Key Concepts for Beginners
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-the-context-layer" class="md-nav__link">
    <span class="md-ellipsis">
      What is the context layer?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What is the context layer?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      1) Instructions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1) Instructions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-to-use-instructions" class="md-nav__link">
    <span class="md-ellipsis">
      When to use Instructions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#instruction-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Instruction Patterns
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schemaguided-reasoning-sgr" class="md-nav__link">
    <span class="md-ellipsis">
      Schema‚ÄëGuided Reasoning (SGR)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-examples" class="md-nav__link">
    <span class="md-ellipsis">
      2) Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2) Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-to-use-examples" class="md-nav__link">
    <span class="md-ellipsis">
      When to use Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Example Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-knowledge" class="md-nav__link">
    <span class="md-ellipsis">
      3) Knowledge
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3) Knowledge">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-to-use-knowledge" class="md-nav__link">
    <span class="md-ellipsis">
      When to use Knowledge
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#knowledge-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Knowledge Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-memory" class="md-nav__link">
    <span class="md-ellipsis">
      4) Memory
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4) Memory">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-to-use-memory" class="md-nav__link">
    <span class="md-ellipsis">
      When to use Memory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Memory Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-skills" class="md-nav__link">
    <span class="md-ellipsis">
      5) Skills
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5) Skills">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-to-use-skills" class="md-nav__link">
    <span class="md-ellipsis">
      When to use Skills
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-is-a-skill" class="md-nav__link">
    <span class="md-ellipsis">
      What is a Skill?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#skills-pattern-progressive-disclosure" class="md-nav__link">
    <span class="md-ellipsis">
      Skills Pattern: Progressive Disclosure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#skill-best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Skill Best Practices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      Security Considerations
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-tools" class="md-nav__link">
    <span class="md-ellipsis">
      6) Tools
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6) Tools">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-to-use-tools" class="md-nav__link">
    <span class="md-ellipsis">
      When to use Tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tool-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Tool Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-guardrails" class="md-nav__link">
    <span class="md-ellipsis">
      7) Guardrails
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7) Guardrails">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-to-use-guardrails" class="md-nav__link">
    <span class="md-ellipsis">
      When to use Guardrails
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guardrail-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Guardrail Patterns
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#concrete-example-support-bot-answering-a-ticket" class="md-nav__link">
    <span class="md-ellipsis">
      Concrete example: support bot answering a ticket
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-fundamentals-deep-dive" class="md-nav__link">
    <span class="md-ellipsis">
      Context Fundamentals Deep Dive
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context Fundamentals Deep Dive">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-anatomy-of-context" class="md-nav__link">
    <span class="md-ellipsis">
      The Anatomy of Context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-windows-and-attention-mechanics" class="md-nav__link">
    <span class="md-ellipsis">
      Context Windows and Attention Mechanics
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context Windows and Attention Mechanics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-progressive-disclosure-principle" class="md-nav__link">
    <span class="md-ellipsis">
      The Progressive Disclosure Principle
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-quality-versus-quantity" class="md-nav__link">
    <span class="md-ellipsis">
      Context Quality Versus Quantity
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-degradation-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Context Degradation Patterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context Degradation Patterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-lost-in-middle-phenomenon" class="md-nav__link">
    <span class="md-ellipsis">
      The Lost-in-Middle Phenomenon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-poisoning" class="md-nav__link">
    <span class="md-ellipsis">
      Context Poisoning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-distraction" class="md-nav__link">
    <span class="md-ellipsis">
      Context Distraction
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-confusion" class="md-nav__link">
    <span class="md-ellipsis">
      Context Confusion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-clash" class="md-nav__link">
    <span class="md-ellipsis">
      Context Clash
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#model-specific-degradation-thresholds" class="md-nav__link">
    <span class="md-ellipsis">
      Model-Specific Degradation Thresholds
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-compression-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Context Compression Strategies
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context Compression Strategies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#when-compression-is-needed" class="md-nav__link">
    <span class="md-ellipsis">
      When Compression is Needed
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#three-production-ready-approaches" class="md-nav__link">
    <span class="md-ellipsis">
      Three Production-Ready Approaches
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compression-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      Compression Comparison
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-artifact-trail-problem" class="md-nav__link">
    <span class="md-ellipsis">
      The Artifact Trail Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compression-trigger-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Compression Trigger Strategies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#probe-based-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Probe-Based Evaluation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#context-optimization-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Context Optimization Techniques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Context Optimization Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compaction-strategies" class="md-nav__link">
    <span class="md-ellipsis">
      Compaction Strategies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#observation-masking" class="md-nav__link">
    <span class="md-ellipsis">
      Observation Masking
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kv-cache-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      KV-Cache Optimization
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-partitioning" class="md-nav__link">
    <span class="md-ellipsis">
      Context Partitioning
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optimization-decision-framework" class="md-nav__link">
    <span class="md-ellipsis">
      Optimization Decision Framework
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#how-to-cook-it-stepbystep" class="md-nav__link">
    <span class="md-ellipsis">
      How to cook it (step‚Äëby‚Äëstep)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="How to cook it (step‚Äëby‚Äëstep)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#step-1-write-the-contract" class="md-nav__link">
    <span class="md-ellipsis">
      Step 1: Write the contract
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-pick-retrieval-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Step 2: Pick retrieval strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-design-memory" class="md-nav__link">
    <span class="md-ellipsis">
      Step 3: Design memory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-specify-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Step 4: Specify tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-install-guardrails" class="md-nav__link">
    <span class="md-ellipsis">
      Step 5: Install guardrails
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-add-observability-evals" class="md-nav__link">
    <span class="md-ellipsis">
      Step 6: Add observability &amp; evals
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-iterate" class="md-nav__link">
    <span class="md-ellipsis">
      Step 7: Iterate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#antipatterns" class="md-nav__link">
    <span class="md-ellipsis">
      Anti‚Äëpatterns
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Anti‚Äëpatterns">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-stuff-the-window" class="md-nav__link">
    <span class="md-ellipsis">
      1. Stuff-the-window
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-unvalidated-tool-results" class="md-nav__link">
    <span class="md-ellipsis">
      2. Unvalidated tool results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-one-shot-everything" class="md-nav__link">
    <span class="md-ellipsis">
      3. One-shot everything
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-unbounded-memory" class="md-nav__link">
    <span class="md-ellipsis">
      4. Unbounded memory
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-rag-everywhere" class="md-nav__link">
    <span class="md-ellipsis">
      5. RAG everywhere
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#6-ignoring-guardrail-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      6. Ignoring guardrail triggers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#7-no-evals" class="md-nav__link">
    <span class="md-ellipsis">
      7. No evals
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#quick-wins-ship-these-today" class="md-nav__link">
    <span class="md-ellipsis">
      Quick wins: ship these today
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Quick wins: ship these today">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-add-output-schema-validation" class="md-nav__link">
    <span class="md-ellipsis">
      1. Add output schema validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-instrument-basic-tracing" class="md-nav__link">
    <span class="md-ellipsis">
      2. Instrument basic tracing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-split-system-vs-user-messages" class="md-nav__link">
    <span class="md-ellipsis">
      3. Split system vs user messages
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-add-citation-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      4. Add citation requirements
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#5-set-memory-expiry" class="md-nav__link">
    <span class="md-ellipsis">
      5. Set memory expiry
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusion
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
    <nav class="md-nav" aria-label="References">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Resources
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
<div class="md-content md-content--post" data-md-component="content">
  <div
    class="md-sidebar md-sidebar--post"
    data-md-component="sidebar"
    data-md-type="navigation"
  >
    <div class="md-sidebar__scrollwrap">
      <div class="md-sidebar__inner md-post">
        <nav class="md-nav md-nav--primary">
          <div class="md-post__back">
            <div class="md-nav__title md-nav__container">
              <a href="../../../../" class="md-nav__link">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
                <span class="md-ellipsis"> Back to index </span>
              </a>
            </div>
          </div>

          
          <ul class="md-post__meta md-nav__list">
            <li class="md-nav__item md-nav__item--section">
              <div class="md-post__title">
                <span class="md-ellipsis">Topics</span>
              </div>
              <nav class="md-nav">
                          
                <div
                  class="blog-category-section"
                >
                  <div class="blog-category-header">
                    <span class="blog-category-icon"
                      >ü§ñ</span
                    >
                    <span class="blog-category-name">AI Engineering</span>
                  </div>
                  <ul class="blog-category-posts">
                      
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../../2026/01/04/the-complete-guide-to-llm-fine-tuning-in-2025-from-theory-to-production/">The Complete Guide to LLM Fine-Tuning in 2025: From Theory to Production</a>
                    </li>
                    
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../22/lorax-playbook---orchestrating-thousands-of-lora-adapters-on-kubernetes/">LoRAX Playbook - Orchestrating Thousands of LoRA Adapters on Kubernetes</a>
                    </li>
                    
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../05/11/choosing-the-right-open-source-llm-variant--file-format/">Choosing the Right Open-Source LLM Variant & File Format</a>
                    </li>
                    
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../05/10/quick-guide-on-running-llms-locally-on-macos/">Quick-guide on Running LLMs Locally on macOS</a>
                    </li>
                    
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../05/04/scaling-large-language-models---practical-multi-gpu-and-multi-node-strategies-for-2025/">Scaling Large Language Models - Practical Multi-GPU and Multi-Node Strategies for 2025</a>
                    </li>
                     
                  </ul>
                </div>
                 
                <div
                  class="blog-category-section"
                >
                  <div class="blog-category-header">
                    <span class="blog-category-icon"
                      >üìö</span
                    >
                    <span class="blog-category-name">Agents 101</span>
                  </div>
                  <ul class="blog-category-posts">
                      
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../../2026/01/31/the-cognitive-engine-choosing-the-right-reasoning-loop/">The Cognitive Engine: Choosing the Right Reasoning Loop</a>
                    </li>
                     
                  </ul>
                </div>
                 
                <div
                  class="blog-category-section blog-category-section--active"
                >
                  <div class="blog-category-header">
                    <span class="blog-category-icon"
                      >ü¶æ</span
                    >
                    <span class="blog-category-name">Agentic AI</span>
                  </div>
                  <ul class="blog-category-posts">
                      
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../../2026/01/11/enterprise-rag-challenge-3-winning-approaches-for-autonomous-ai-agents/">Enterprise RAG Challenge 3: Winning Approaches for Autonomous AI Agents</a>
                    </li>
                    
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../12/28/schema-guided-reasoning-on-vllm--turning-llms-into-reliable-business-logic-engines/">Schema-Guided Reasoning on vLLM ‚Äî Turning LLMs into Reliable Business Logic Engines</a>
                    </li>
                    
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../20/domain-driven-design-for-ai-agents-a-beginner-friendly-guide/">Domain-driven design for AI agents: a beginner-friendly guide</a>
                    </li>
                    
                    <li
                      class="blog-category-post blog-category-post--active"
                    >
                      <a href="./">Context Engineering in the Agentic‚ÄëAI Era ‚Äî and How to Cook It</a>
                    </li>
                     
                  </ul>
                </div>
                 
                <div
                  class="blog-category-section"
                >
                  <div class="blog-category-header">
                    <span class="blog-category-icon"
                      >üîß</span
                    >
                    <span class="blog-category-name">Infrastructure</span>
                  </div>
                  <ul class="blog-category-posts">
                      
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../05/06/mlops-in-the-age-of-foundation-models-evolving-infrastructure-for-llms-and-beyond/">MLOps in the Age of Foundation Models. Evolving Infrastructure for LLMs and Beyond</a>
                    </li>
                     
                  </ul>
                </div>
                 
                <div
                  class="blog-category-section"
                >
                  <div class="blog-category-header">
                    <span class="blog-category-icon"
                      ></span
                    >
                    <span class="blog-category-name">Paper Review</span>
                  </div>
                  <ul class="blog-category-posts">
                      
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../../2026/01/21/mhc-how-deepseek-scaled-residual-connections-without-breaking-training/">mHC: How DeepSeek Scaled Residual Connections Without Breaking Training</a>
                    </li>
                     
                  </ul>
                </div>
                 
                <div
                  class="blog-category-section"
                >
                  <div class="blog-category-header">
                    <span class="blog-category-icon"
                      >üêç</span
                    >
                    <span class="blog-category-name">Python</span>
                  </div>
                  <ul class="blog-category-posts">
                      
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../05/08/the-ultimate-guide-to-pyprojecttoml/">The Ultimate Guide to `pyproject.toml`</a>
                    </li>
                    
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../04/17/quick-guide-managing-python-on-macos-with-uv/">Quick Guide: Managing Python on macOS with uv</a>
                    </li>
                     
                  </ul>
                </div>
                 
                <div
                  class="blog-category-section"
                >
                  <div class="blog-category-header">
                    <span class="blog-category-icon"
                      >üõ†Ô∏è</span
                    >
                    <span class="blog-category-name">Tooling</span>
                  </div>
                  <ul class="blog-category-posts">
                      
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../06/10/building-a-custom-featurestorelite-mcp-server-using-uv/">Building a Custom FeatureStoreLite MCP Server Using uv</a>
                    </li>
                    
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../05/10/quick-guide-on-local-stable-diffusion-toolkits-for-macos/">Quick-guide on Local Stable-Diffusion Toolkits for macOS</a>
                    </li>
                    
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../05/07/mastering-zsh-startup-zprofile-vs-zshrc-/">Mastering Zsh Startup: ~/.zprofile vs ~/.zshrc üöÄ</a>
                    </li>
                    
                    <li
                      class="blog-category-post"
                    >
                      <a href="../../../04/19/quick-guide-on-setting-up-a-macbook-for-ai-engineering/">Quick-Guide on setting up a MacBook for AI Engineering</a>
                    </li>
                     
                  </ul>
                </div>
                
              </nav>
            </li>
          </ul>

          
        </nav>
        
      </div>
    </div>
  </div>
  <article class="md-content__inner md-typeset">
     
  




<h1 id="context-engineering-in-the-agenticai-era-and-how-to-cook-it">Context Engineering in the Agentic‚ÄëAI Era ‚Äî and How to Cook It</h1>
<h2 id="tldr">TL;DR</h2>
<blockquote>
<p><em>Context engineering</em> (the <strong>context layer</strong>) is the pipeline that selects, structures, and governs <strong>what the model sees at the moment of decision</strong>: <strong>Instructions, Examples, Knowledge, Memory, Skills, Tools, Guardrails</strong>. Agentic systems live or die by this layer. Below is a field‚Äëtested blueprint and patterns.</p>
</blockquote>
<p><strong>The problem</strong>: You build an agent. It works in demos, fails in production. Why? The model gets the wrong context at the wrong time‚Äîstale memory, irrelevant docs, no safety checks, ambiguous instructions.</p>
<p><strong>The fix</strong>: Design the context layer deliberately. This guide shows you how.</p>
<!-- more -->

<hr />
<h2 id="why-now">Why now</h2>
<p>Picture this: your customer support agent runs for three weeks. It handles 200 tickets. Then it suddenly starts hallucinating product details, mixing up customers, and calling the wrong APIs. The model didn't get worse‚Äîthe context did.</p>
<p>Here's why context engineering became critical in 2025:</p>
<ul>
<li>
<p><strong>Agents moved from chat to action.</strong> Multi‚Äëstep planning, tool use, and sub‚Äëagents raised the bar for <em>repeatable context assembly</em> vs. one‚Äëoff prompts. A single bad context decision can cascade through a 10‚Äëstep plan.</p>
</li>
<li>
<p><strong>Memory and standards arrived.</strong> Centralized user/org memory (and standards like MCP) make it feasible to load personal/org context <em>safely</em>‚Äîif you design the layer properly. Without governance, you leak PII or overload the window.</p>
</li>
<li>
<p><strong>Retrieval matured.</strong> Hybrid search, reranking, and graph‚Äëaware retrieval (e.g., GraphRAG) reduce hallucinations and token waste. But only if you route queries to the right retrieval strategy.</p>
</li>
<li>
<p><strong>Value focus shifted.</strong> Many "agentic" pilots stall not because of model quality but because of weak context design/governance. A deliberate context layer is the fix.</p>
</li>
</ul>
<hr />
<h2 id="key-concepts-for-beginners">Key Concepts for Beginners</h2>
<p>Before we dive in, let's define a few terms that will appear frequently:</p>
<ul>
<li><strong>Context Window</strong>: The "working memory" of the model. It's the maximum amount of text (measured in tokens) the model can process at once. If you exceed it, the model crashes or forgets the beginning.</li>
<li><strong>Tokens</strong>: The basic units of text for an LLM. Roughly, 1,000 tokens ‚âà 750 words.</li>
<li><strong>Attention Budget</strong>: Language models process tokens through attention mechanisms that create pairwise relationships between all tokens. For n tokens, this creates n¬≤ relationships. As context grows, this budget gets stretched thin‚Äîmeaning information in the middle of context receives less attention than information at the beginning or end.</li>
<li><strong>Embeddings</strong>: Numerical representations of text. We use them to search for "meaning" rather than just keywords (e.g., searching for "dog" might find "puppy").</li>
<li><strong>JSON Schema</strong>: A standard way to describe the structure of JSON data. It allows us to force the model to output specific fields (like <code>{"answer": "...", "citations": [...]}</code>).</li>
<li><strong>MCP (Model Context Protocol)</strong>: An open standard that enables AI models to interact with external data and tools securely. Think of it as a "USB port" for AI apps to connect to your local files, databases, or Slack.</li>
</ul>
<p><img alt="Context Window Composition" src="../../../../assets/2025-10-05-context-engineering/context_window_composition.svg" /></p>
<hr />
<h2 id="what-is-the-context-layer">What is the context layer?</h2>
<blockquote>
<p>A <strong>pipeline + policy</strong> that (1) <strong>selects &amp; structures</strong> inputs per step, (2) <strong>applies controls</strong> (format/safety/policy), and (3) <strong>feeds</strong> the model/agent with <strong>just‚Äëenough, just‚Äëin‚Äëtime</strong> context.</p>
</blockquote>
<p>Think of it as the assembly line that prepares exactly what the model needs to make a good decision‚Äînothing more, nothing less.</p>
<p><strong>Context is a finite resource.</strong> Like humans with limited working memory, language models have an attention budget that depletes as context grows. Every new token consumes some of this budget. The engineering problem is finding the smallest possible set of high-signal tokens that maximize the likelihood of desired outcomes.</p>
<p>There's no single canonical definition. Different teams ship different stacks. But a practical, shared decomposition is:</p>
<p><img alt="Context Layer Architecture" src="../../../../assets/2025-10-05-context-engineering/context_layer_components.svg" /></p>
<h3 id="1-instructions">1) Instructions</h3>
<p><strong>What</strong>: A durable <strong>contract</strong> for behavior: role, tone, constraints, output schema, evaluation goals. Modern models respect instruction <strong>hierarchies</strong> (system &gt; developer &gt; user).</p>
<h4 id="when-to-use-instructions">When to use Instructions</h4>
<ul>
<li>You need <strong>consistent output</strong> (reports, SQL, API calls, JSON).</li>
<li>You must apply policy (e.g., redact PII, reject unsupported asks).</li>
</ul>
<h4 id="instruction-patterns">Instruction Patterns</h4>
<ul>
<li><strong>Role &amp; policy blocks</strong>: keep <em>rules</em> separate from the user task.</li>
<li><strong>Structured outputs</strong>: JSON Schema ‚Üí deterministic downstream.</li>
<li><strong>Instruction hierarchy</strong>: split <em>system</em>, <em>developer</em>, <em>user</em> explicitly.</li>
</ul>
<p>Plain example (policy block)</p>
<p><img alt="Instruction Hierarchy" src="../../../../assets/2025-10-05-context-engineering/instruction_hierarchy.svg" /></p>
<div class="highlight"><pre><span></span><code>SYSTEM RULES
- Role: support assistant for ACME.
- Always output valid JSON per AnswerSchema.
- If a request needs account data, ask for the account ID.
- Never include secrets or internal URLs.
</code></pre></div>
<hr />
<h4 id="schemaguided-reasoning-sgr">Schema‚ÄëGuided Reasoning (SGR)</h4>
<p><strong>What</strong>: Drive the agent with JSON Schemas for the plan, tool arguments, intermediate results, and the final answer. The model emits/consumes JSON at each step; your code validates it.</p>
<p><strong>Why</strong>: Reduces ambiguity, makes retries/repairs deterministic, and improves safety by enforcing types and required fields throughout the loop.</p>
<p><strong>How it works</strong>:</p>
<ol>
<li>Define schemas for <code>Plan</code>, <code>ToolArgs</code>, <code>StepResult</code>, and <code>FinalAnswer</code>.</li>
<li>At each agent step, the model outputs JSON matching one of these schemas.</li>
<li>Your code validates the JSON before proceeding.</li>
<li>If validation fails, attempt one automatic repair (e.g., add missing required fields with defaults).</li>
<li>If repair fails, refuse and log the error.</li>
</ol>
<p><strong>Concrete example</strong>: Instead of the model saying "I'll search for the customer's tickets", it outputs:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;action&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;call_tool&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;tool&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;search_tickets&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;customer_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;A-123&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;limit&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;expected_schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;TicketList&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>Your code validates <code>args</code> against the tool's schema <em>before</em> calling the API.</p>
<hr />
<h3 id="2-examples">2) Examples</h3>
<p><strong>What</strong>: A few short input‚Üíoutput examples that show the exact format, tone, and steps the model should follow.</p>
<h4 id="when-to-use-examples">When to use Examples</h4>
<ul>
<li>You need the model to match a <strong>specific template</strong> (tables, JSON, SQL, API calls).</li>
<li>You want <strong>domain‚Äëspecific</strong> phrasing/labels or consistent tone.</li>
</ul>
<h4 id="example-patterns">Example Patterns</h4>
<ul>
<li><strong>Canonical demos</strong>: show the <em>exact</em> target structure.</li>
<li><strong>Bad vs. good</strong>: contrast common mistakes with the desired result.</li>
<li><strong>Schema‚Äëfirst + examples</strong>: pair your JSON Schema with 2‚Äì3 short demos.</li>
<li><strong>Keep it short</strong>: many small, focused demos beat one long example.</li>
</ul>
<hr />
<h3 id="3-knowledge">3) Knowledge</h3>
<p><strong>What</strong>: Grounding via retrieval (vector + keyword), reranking, graphs, web, or enterprise sources.</p>
<h4 id="when-to-use-knowledge">When to use Knowledge</h4>
<ul>
<li>You need <strong>fresh or private facts</strong>.</li>
<li>You want <strong>cited, defensible</strong> answers.</li>
</ul>
<h4 id="knowledge-patterns">Knowledge Patterns</h4>
<ul>
<li><strong>Hybrid retrieval</strong> (BM25 + dense) with <strong>reranker</strong> to shrink tokens.</li>
<li><strong>Graph‚Äëaware</strong> retrieval (GraphRAG) for cross‚Äëdoc relations.</li>
<li><strong>Adaptive RAG</strong>: route between <em>no retrieval</em>, <em>single‚Äëshot</em>, and <em>iterative</em>.</li>
</ul>
<p><img alt="Adaptive Retrieval Router" src="../../../../assets/2025-10-05-context-engineering/retrieval_router.svg" /></p>
<p><strong>Params that matter</strong>:</p>
<ul>
<li><strong>Chunking</strong>: split by semantic boundary (paragraphs, sections) &gt; fixed size.</li>
<li><strong>top‚Äëk</strong>: start with 10‚Äì20 for hybrid, rerank to 3‚Äì5.</li>
<li><strong>MMR (diversity) Œª</strong>: 0.7 as default.</li>
<li><strong>Citations</strong>: Always include source references and quotes.</li>
</ul>
<hr />
<h3 id="4-memory">4) Memory</h3>
<p><strong>What</strong>: Durable context across turns/sessions: <strong>short‚Äëterm</strong> (conversation state), <strong>long‚Äëterm</strong> (user/app facts), <strong>episodic</strong> (events), <strong>semantic</strong> (facts/entities).</p>
<h4 id="when-to-use-memory">When to use Memory</h4>
<ul>
<li>You want personalization and continuity.</li>
<li>Multiple agents coordinate over days/weeks.</li>
</ul>
<h4 id="memory-patterns">Memory Patterns</h4>
<ul>
<li><strong>Entity memories</strong> (names, IDs, preferences) + expiry policies.</li>
<li><strong>Scoped retrieval</strong> from long-term store (vector/kv/graph).</li>
<li><strong>Compression integration</strong>: When short-term memory grows large, apply <a href="#context-compression-strategies">Context Compression Strategies</a> <a href="#references">[7]</a>.</li>
</ul>
<p><img alt="Memory Scoping" src="../../../../assets/2025-10-05-context-engineering/memory_scoping.svg" /></p>
<p><strong>Expiry rules</strong>:</p>
<ul>
<li>Preferences: 365 days</li>
<li>Episodic events: 90 days</li>
<li>Short-term state: clear after session ends</li>
<li>Entities: no expiry, but require periodic validation</li>
</ul>
<hr />
<h3 id="5-skills">5) Skills</h3>
<p><strong>What</strong>: Composable domain expertise that agents discover and load dynamically. <a href="https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills">Agent Skills</a> are a framework introduced by Anthropic for equipping agents with specialized capabilities by capturing and sharing procedural knowledge.</p>
<blockquote>
<p>Building a skill for an agent is like putting together an onboarding guide for a new hire.
‚Äî Anthropic Engineering Blog</p>
</blockquote>
<h4 id="when-to-use-skills">When to use Skills</h4>
<ul>
<li>You need <strong>domain-specific expertise</strong> (PDF manipulation, git operations, data analysis).</li>
<li>You want <strong>reusable procedures</strong> across agents or organizations.</li>
<li>You need to <strong>specialize</strong> an agent without hardcoding behaviors.</li>
</ul>
<h4 id="what-is-a-skill">What is a Skill?</h4>
<p>A Skill is an organized folder containing instructions, scripts, and resources that agents can discover and load dynamically:</p>
<ul>
<li><strong>SKILL.md file</strong>: Contains name, description (in YAML frontmatter), and the skill's instructions</li>
<li><strong>Additional files</strong>: Scripts, references, templates that the skill can reference</li>
<li><strong>Code</strong>: Python scripts or other executables the agent can run as tools</li>
</ul>
<h4 id="skills-pattern-progressive-disclosure">Skills Pattern: Progressive Disclosure</h4>
<p>The key design principle is <strong>progressive disclosure</strong>‚Äîloading information only when needed. See <a href="#the-progressive-disclosure-principle">The Progressive Disclosure Principle</a> for the general pattern.</p>
<ol>
<li><strong>Level 1 (Startup)</strong>: Only skill names and descriptions are loaded into context</li>
<li><strong>Level 2 (Activation)</strong>: When relevant, the full SKILL.md is loaded</li>
<li><strong>Level 3+ (Deep dive)</strong>: Additional referenced files loaded only as needed</li>
</ol>
<p>This means skill content is effectively unbounded‚Äîagents don't need to load everything into context at once.</p>
<div class="highlight"><pre><span></span><code>‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Context Window                                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ System Prompt                                           ‚îÇ
‚îÇ ‚îú‚îÄ‚îÄ Core instructions                                   ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ Skill metadata (name + description only)           ‚îÇ
‚îÇ     ‚Ä¢ pdf: &quot;Manipulate PDF documents&quot;                   ‚îÇ
‚îÇ     ‚Ä¢ git: &quot;Advanced git operations&quot;                    ‚îÇ
‚îÇ     ‚Ä¢ context-compression: &quot;Manage long sessions&quot;       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [User triggers task requiring PDF skill]                ‚îÇ
‚îÇ                                                         ‚îÇ
‚îÇ ‚Üí Agent reads pdf/SKILL.md into context                 ‚îÇ
‚îÇ ‚Üí Agent reads pdf/forms.md (only if filling forms)      ‚îÇ
‚îÇ ‚Üí Agent executes pdf/extract_fields.py (without loading)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</code></pre></div>
<h4 id="skill-best-practices">Skill Best Practices</h4>
<p>From Anthropic's guidelines:</p>
<ol>
<li><strong>Start with evaluation</strong>: Identify gaps by running agents on representative tasks, build skills to address shortcomings</li>
<li><strong>Structure for scale</strong>: Split large SKILL.md into separate files, keeping paths separate for mutually exclusive contexts</li>
<li><strong>Think from Claude's perspective</strong>: Monitor skill usage, iterate on name/description to improve triggering accuracy</li>
<li><strong>Iterate with Claude</strong>: Ask Claude to capture successful approaches into reusable skill content</li>
</ol>
<h4 id="security-considerations">Security Considerations</h4>
<p>Skills can introduce vulnerabilities since they provide new capabilities through instructions and code:</p>
<ul>
<li>Install skills only from trusted sources</li>
<li>Audit skills before use‚Äîreview bundled files, code dependencies, and network connections</li>
<li>Pay attention to instructions that connect to external sources</li>
</ul>
<hr />
<h3 id="6-tools">6) Tools</h3>
<p><strong>What</strong>: Function calls to fetch data or take actions (APIs, DB, search, file ops, "computer use").</p>
<h4 id="when-to-use-tools">When to use Tools</h4>
<ul>
<li>You want <strong>deterministic</strong> side‚Äëeffects and data fidelity.</li>
<li>You orchestrate <strong>plan ‚Üí call ‚Üí verify ‚Üí continue</strong> loops.</li>
</ul>
<h4 id="tool-patterns">Tool Patterns</h4>
<ul>
<li><strong>Tool‚Äëfirst planning</strong> + <strong>post‚Äëcall validators</strong>.</li>
<li><strong>Structured outputs</strong> between steps.</li>
<li><strong>Fallbacks</strong> when tools fail (retry ‚Üí degrade ‚Üí human‚Äëin‚Äëloop).</li>
</ul>
<p><img alt="Tool Execution Loop" src="../../../../assets/2025-10-05-context-engineering/tool_execution_loop.svg" /></p>
<p><strong>Key concepts</strong>:</p>
<ul>
<li><strong>Idempotent</strong>: safe to retry without side effects (GET=yes, POST/DELETE=no).</li>
<li><strong>Postconditions</strong>: checks after each call (non_empty_result, status=="ok", valid_json).</li>
<li><strong>Fallback chain</strong>: retry ‚Üí degrade gracefully ‚Üí human-in-loop.</li>
</ul>
<p><strong>A Note on MCP (Model Context Protocol)</strong></p>
<p>MCP is becoming the standard for how agents connect to tools and data <a href="#references">[6]</a>. Instead of custom API wrappers for every service, you run an "MCP Server" for each. Your agent automatically discovers available tools and resources.</p>
<p><img alt="MCP Architecture" src="../../../../assets/2025-10-05-context-engineering/mcp_context_architecture.svg" /></p>
<hr />
<h3 id="7-guardrails">7) Guardrails</h3>
<p><strong>What</strong>: Input/output validation, safety filters, jailbreak defense, schema enforcement, content policy.</p>
<h4 id="when-to-use-guardrails">When to use Guardrails</h4>
<ul>
<li>You need compliance/brand integrity.</li>
<li>You want <strong>typed, correct</strong> outputs and safe behavior.</li>
</ul>
<h4 id="guardrail-patterns">Guardrail Patterns</h4>
<ul>
<li><strong>Programmable rails</strong> (policy rules + actions).</li>
<li><strong>Schema + semantic validators</strong> (types, regex, evals).</li>
<li><strong>Central policy + observability</strong> (dashboards, red‚Äëteaming).</li>
</ul>
<p><img alt="Guardrails Flow" src="../../../../assets/2025-10-05-context-engineering/guardrails_flow.svg" /></p>
<p><strong>Repair vs refuse flow</strong>:</p>
<ul>
<li><strong>Schema violations</strong>: Attempt automatic repair once. If repair fails, refuse with clear error.</li>
<li><strong>Policy violations</strong>: Refuse immediately (no repair attempt). Suggest safe alternative.</li>
</ul>
<p><strong>Common guardrail types</strong>:</p>
<ol>
<li><strong>Input guards</strong>: PII detection, prompt injection defense, toxicity filters</li>
<li><strong>Output guards</strong>: schema validation, content policy, factual consistency</li>
<li><strong>Tool guards</strong>: rate limiting, permission checks, cost thresholds</li>
<li><strong>Memory guards</strong>: PII redaction before storage, expiry enforcement</li>
</ol>
<hr />
<h3 id="concrete-example-support-bot-answering-a-ticket">Concrete example: support bot answering a ticket</h3>
<p>Let's see how all these components work together. When a customer asks "Why is my API key not working?", the context layer assembles:</p>
<ul>
<li><strong>Instructions</strong>: role = helpful support assistant for ACME, cite sources, return JSON {answer, sources, next_steps}.</li>
<li><strong>Examples</strong>: 2 short Q‚ÜíA pairs showing tone and JSON shape (one about API keys, one about billing).</li>
<li><strong>Knowledge</strong>: search the help center and product runbooks for "API key troubleshooting"; include relevant quotes.</li>
<li><strong>Memory</strong>: customer name "Sam", account_id "A-123", plan "Pro", last interaction was "API key created 3 days ago".</li>
<li><strong>Skills</strong>: load <code>ticket-handling</code> skill with troubleshooting procedures, escalation policies, and resolution templates.</li>
<li><strong>Tools</strong>: <code>search_tickets(customer_id)</code>, <code>check_api_key_status(key)</code>, <code>create_issue(description)</code>.</li>
<li><strong>Guardrails</strong>: redact any API key values in output; if schema fails, repair once; if policy violated (e.g., requesting to delete production data), refuse politely.</li>
</ul>
<p>The model receives all of this structured context, generates an answer, and the guardrails validate it before sending to the customer.</p>
<hr />
<h2 id="context-fundamentals-deep-dive">Context Fundamentals Deep Dive</h2>
<p>Understanding the anatomy of context is prerequisite to effective context engineering. This section provides the foundational knowledge for everything that follows.</p>
<h3 id="the-anatomy-of-context">The Anatomy of Context</h3>
<p>Context comprises several distinct components, each with different characteristics and constraints:</p>
<p><strong>System Prompts</strong></p>
<p>System prompts establish the agent's core identity, constraints, and behavioral guidelines. They are loaded once at session start and typically persist throughout the conversation.</p>
<p>The key is finding the right "altitude"‚Äîspecific enough to guide behavior effectively, yet flexible enough to provide strong heuristics. Too low (hardcoded brittle logic) creates fragility; too high (vague guidance) fails to give concrete signals.</p>
<p>Organize prompts into distinct sections using XML tagging or Markdown headers:</p>
<div class="highlight"><pre><span></span><code>&lt;BACKGROUND_INFORMATION&gt;
You are a Python expert helping a development team.
Current project: Data processing pipeline in Python 3.9+
&lt;/BACKGROUND_INFORMATION&gt;

&lt;INSTRUCTIONS&gt;
<span class="k">-</span><span class="w"> </span>Write clean, idiomatic Python code
<span class="k">-</span><span class="w"> </span>Include type hints for function signatures
<span class="k">-</span><span class="w"> </span>Add docstrings for public functions
&lt;/INSTRUCTIONS&gt;

&lt;TOOL_GUIDANCE&gt;
Use bash for shell operations, python for code tasks.
File operations should use pathlib for cross-platform compatibility.
&lt;/TOOL_GUIDANCE&gt;
</code></pre></div>
<p><strong>Tool Definitions</strong></p>
<p>Tool definitions specify the actions an agent can take. Each tool includes a name, description, parameters, and return format. Tool descriptions collectively steer agent behavior‚Äîpoor descriptions force agents to guess; optimized descriptions include usage context, examples, and defaults.</p>
<p><strong>The consolidation principle</strong>: If a human engineer cannot definitively say which tool should be used in a given situation, an agent cannot be expected to do better.</p>
<p><strong>Retrieved Documents</strong></p>
<p>Agents use retrieval augmented generation to pull relevant documents into context at runtime rather than pre-loading all possible information. The just-in-time approach maintains lightweight identifiers (file paths, stored queries, web links) and loads data dynamically.</p>
<p><strong>Message History</strong></p>
<p>Message history contains the conversation between user and agent, including previous queries, responses, and reasoning. For long-running tasks, message history can grow to dominate context usage. It serves as scratchpad memory where agents track progress and maintain task state.</p>
<p><strong>Tool Outputs</strong></p>
<p>Tool outputs are the results of agent actions: file contents, search results, command execution output, API responses. Research shows observations (tool outputs) can reach <strong>over 80% of total context usage</strong> in typical agent trajectories <a href="#references">[4]</a>. This creates pressure for strategies like observation masking and compaction.</p>
<h3 id="context-windows-and-attention-mechanics">Context Windows and Attention Mechanics</h3>
<p><strong>The Attention Budget Constraint</strong></p>
<p>Language models process tokens through attention mechanisms that create pairwise relationships between all tokens. For n tokens, this creates n¬≤ relationships that must be computed. As context length increases, the model's ability to capture relationships gets stretched thin.</p>
<p>Models develop attention patterns from training data where shorter sequences predominate. This means models have less experience with context-wide dependencies. The result is an "attention budget" that depletes as context grows.</p>
<p><img alt="Progressive Disclosure" src="../../../../assets/2025-10-05-context-engineering/progressive_disclosure.svg" /></p>
<h4 id="the-progressive-disclosure-principle">The Progressive Disclosure Principle</h4>
<p>Progressive disclosure manages context efficiently by loading information only as needed. At startup, agents load only skill names and descriptions‚Äîsufficient to know when a skill might be relevant. Full content loads only when activated for specific tasks.</p>
<div class="highlight"><pre><span></span><code><span class="gh"># Instead of loading all documentation at once:</span>

<span class="gh"># Step 1: Load summary</span>

docs/api_summary.md # Lightweight overview

<span class="gh"># Step 2: Load specific section as needed</span>

docs/api/endpoints.md # Only when API calls needed
docs/api/authentication.md # Only when auth context needed
</code></pre></div>
<h3 id="context-quality-versus-quantity">Context Quality Versus Quantity</h3>
<p>The assumption that larger context windows solve memory problems has been empirically debunked. Context engineering means finding the smallest possible set of high-signal tokens.</p>
<p>Several factors create pressure for context efficiency:</p>
<ul>
<li><strong>Cost</strong>: Processing cost grows disproportionately with context length‚Äînot just double for double the tokens, but exponentially more in time and computing resources.</li>
<li><strong>Degradation</strong>: Model performance degrades beyond certain context lengths even when the window technically supports more.</li>
<li><strong>Latency</strong>: Long inputs remain expensive even with prefix caching.</li>
</ul>
<p><strong>The guiding principle</strong>: Informativity over exhaustiveness. Include what matters for the decision at hand, exclude what does not.</p>
<hr />
<h2 id="context-degradation-patterns">Context Degradation Patterns</h2>
<p>Language models exhibit predictable degradation patterns as context length increases. Understanding these patterns is essential for diagnosing failures and designing resilient systems.</p>
<p><img alt="Context Degradation Patterns" src="../../../../assets/2025-10-05-context-engineering/degradation_patterns.svg" /></p>
<h3 id="the-lost-in-middle-phenomenon">The Lost-in-Middle Phenomenon</h3>
<p>The most well-documented degradation pattern is "lost-in-middle," where models demonstrate U-shaped attention curves <a href="#references">[1]</a>. Information at the beginning and end of context receives reliable attention, while information in the middle suffers from <strong>10-40% lower recall accuracy</strong>.</p>
<p><strong>Why it happens</strong>: Models allocate massive attention to the first token (often the BOS token) to stabilize internal states, creating an "attention sink" that consumes attention budget <a href="#references">[2]</a>. As context grows, middle tokens fail to garner sufficient attention weight.</p>
<p><strong>Practical fix</strong>: Place critical information at the beginning or end of context. Use summary structures that surface key information at attention-favored positions.</p>
<p><img alt="Attention U-Curve" src="../../../../assets/2025-10-05-context-engineering/attention_u_curve.svg" /></p>
<div class="highlight"><pre><span></span><code><span class="gh"># Organize context with critical info at edges</span>

[CURRENT TASK] # At start

<span class="k">-</span><span class="w"> </span>Goal: Generate quarterly report
<span class="k">-</span><span class="w"> </span>Deadline: End of week

[DETAILED CONTEXT] # Middle (less attention)

<span class="k">-</span><span class="w"> </span>50 pages of data
<span class="k">-</span><span class="w"> </span>Multiple analysis sections
<span class="k">-</span><span class="w"> </span>Supporting evidence

[KEY FINDINGS] # At end

<span class="k">-</span><span class="w"> </span>Revenue up 15%
<span class="k">-</span><span class="w"> </span>Costs down 8%
<span class="k">-</span><span class="w"> </span>Growth in Region A
</code></pre></div>
<p><strong>Prompt duplication technique</strong>: For critical instructions that must not be missed, duplicate them at both the beginning AND end of the context. Since models attend strongly to both edges, placing the same instruction in both positions ensures it gets proper attention regardless of context length. This is particularly useful for:</p>
<ul>
<li>System constraints that must always be followed</li>
<li>Output format requirements</li>
<li>Safety policies and content guidelines</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="gh"># Example: Duplicating critical instructions</span>

[SYSTEM - START]
CRITICAL: Always respond in JSON format. Never include PII.

[... long context with documents, history, tools ...]

[SYSTEM - REMINDER]
CRITICAL: Always respond in JSON format. Never include PII.
</code></pre></div>
<h3 id="context-poisoning">Context Poisoning</h3>
<p>Context poisoning occurs when hallucinations, errors, or incorrect information enters context and compounds through repeated reference. Once poisoned, context creates feedback loops that reinforce incorrect beliefs.</p>
<p><strong>How poisoning occurs</strong>:</p>
<ol>
<li>Tool outputs contain errors or unexpected formats</li>
<li>Retrieved documents have incorrect or outdated information</li>
<li>Model-generated summaries introduce hallucinations that persist</li>
</ol>
<p><strong>Detection symptoms</strong>:</p>
<ul>
<li>Degraded output quality on tasks that previously succeeded</li>
<li>Tool misalignment (agents call wrong tools or parameters)</li>
<li>Persistent hallucinations despite correction attempts</li>
</ul>
<p><strong>Recovery</strong>: Truncate context to before the poisoning point, explicitly note the poisoning and request re-evaluation, or restart with clean context preserving only verified information.</p>
<h3 id="context-distraction">Context Distraction</h3>
<p>Context distraction emerges when context grows so long that models over-focus on provided information at the expense of their training knowledge.</p>
<p>Research shows that <strong>even a single irrelevant document</strong> reduces performance on tasks involving relevant documents <a href="#references">[8]</a>. The effect follows a step function‚Äîthe presence of any distractor triggers degradation.</p>
<p><strong>Key insight</strong>: Models cannot "skip" irrelevant context. They must attend to everything provided, creating distraction even when irrelevant information is clearly not useful.</p>
<p><strong>Mitigation</strong>: Apply relevance filtering before loading documents. Use namespacing to make irrelevant sections easy to ignore. Consider whether information needs to be in context or can be accessed through tool calls.</p>
<h3 id="context-confusion">Context Confusion</h3>
<p>Context confusion arises when irrelevant information influences responses in ways that degrade quality. If you put something in context, the model has to pay attention to it‚Äîit may incorporate irrelevant information, use inappropriate tool definitions, or apply constraints from different contexts.</p>
<p><strong>Signs</strong>: Responses address the wrong aspect of queries, tool calls seem appropriate for different tasks, outputs mix requirements from multiple sources.</p>
<p><strong>Fix</strong>: Explicit task segmentation (different tasks get different context windows), clear transitions between task contexts, state management that isolates context.</p>
<h3 id="context-clash">Context Clash</h3>
<p>Context clash develops when accumulated information directly conflicts, creating contradictory guidance. This differs from poisoning where one piece is incorrect‚Äîin clash, multiple correct pieces contradict each other.</p>
<p><strong>Common sources</strong>: Multi-source retrieval with contradictory information, version conflicts (outdated and current information both in context), perspective conflicts (valid but incompatible viewpoints).</p>
<p><strong>Resolution</strong>: Explicit conflict marking, priority rules establishing which source takes precedence, version filtering to exclude outdated information.</p>
<h3 id="model-specific-degradation-thresholds">Model-Specific Degradation Thresholds</h3>
<p>Research provides concrete data on when performance degradation begins. Note that "effective context length" (where models maintain optimal performance) is often significantly smaller than advertised maximum context windows <a href="#references">[3]</a>:</p>
<table>
<thead>
<tr>
<th>Model</th>
<th>Max Context</th>
<th>Effective Context</th>
<th>Degradation Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td>GPT-4 Turbo</td>
<td>128K tokens</td>
<td>~32K tokens</td>
<td>Retrieval degrades after 32K, accuracy suffers beyond 64K</td>
</tr>
<tr>
<td>GPT-4o</td>
<td>128K tokens</td>
<td>~8K tokens</td>
<td>Complex NIAH accuracy drops from 99% to 70% at 32K</td>
</tr>
<tr>
<td>Claude 3.5 Sonnet</td>
<td>200K tokens</td>
<td>~4K tokens</td>
<td>Complex NIAH accuracy drops from 88% to 30% at 32K</td>
</tr>
<tr>
<td>Gemini 1.5 Pro</td>
<td>1M tokens</td>
<td>~128K tokens</td>
<td>99% NIAH recall at 1M, best long-context performance</td>
</tr>
<tr>
<td>Gemini 2.0 Flash</td>
<td>1M tokens</td>
<td>~32K tokens</td>
<td>Complex NIAH accuracy drops from 94% to 48% at 32K</td>
</tr>
</tbody>
</table>
<p><em>Sources: RULER benchmark <a href="#references">[3]</a>, NoLiMa benchmark <a href="#references">[9]</a>, Google technical reports</em></p>
<p><strong>Key finding</strong> <a href="#references">[3]</a>: Only 50% of models claiming 32K+ context maintain satisfactory performance at 32K tokens. Near-perfect scores on simple needle-in-haystack tests do not translate to real long-context understanding‚Äîcomplex reasoning tasks show much steeper degradation.</p>
<hr />
<h2 id="context-compression-strategies">Context Compression Strategies</h2>
<blockquote>
<p><strong>Terminology note</strong>: Context compression is an umbrella category that includes several techniques: summarization (for conversation history and memory), observation masking (for tool outputs), and selective trimming <a href="#references">[5]</a>. The memory summarization referenced in the <a href="#4-memory">Memory</a> section is one application of these broader compression strategies.</p>
</blockquote>
<p>When agent sessions generate millions of tokens of conversation history, compression becomes mandatory. The naive approach is aggressive compression to minimize tokens per request. <strong>The correct optimization target is tokens per task</strong> <a href="#references">[4]</a>: total tokens consumed to complete a task, including re-fetching costs when compression loses critical information.</p>
<p><img alt="Compression Strategies" src="../../../../assets/2025-10-05-context-engineering/compression_strategies.svg" /></p>
<h3 id="when-compression-is-needed">When Compression is Needed</h3>
<p>Activate compression when:</p>
<ul>
<li>Agent sessions exceed context window limits</li>
<li>Agents "forget" what files they modified</li>
<li>Debugging long-running coding or debugging sessions</li>
<li>Performance degrades in extended conversations</li>
</ul>
<h3 id="three-production-ready-approaches">Three Production-Ready Approaches</h3>
<p><strong>1. Anchored Iterative Summarization</strong></p>
<p>Maintain structured, persistent summaries with explicit sections for session intent, file modifications, decisions, and next steps. When compression triggers, summarize only the newly-truncated span and merge with the existing summary.</p>
<p><strong>Key insight</strong>: Structure forces preservation. Dedicated sections act as checklists that the summarizer must populate, preventing silent information drift.</p>
<div class="highlight"><pre><span></span><code><span class="gu">## Session Intent</span>

Debug 401 Unauthorized error on /api/auth/login despite valid credentials.

<span class="gu">## Root Cause</span>

Stale Redis connection in session store. JWT generated correctly but session could not be persisted.

<span class="gu">## Files Modified</span>

<span class="k">-</span><span class="w"> </span>auth.controller.ts: No changes (read only)
<span class="k">-</span><span class="w"> </span>config/redis.ts: Fixed connection pooling configuration
<span class="k">-</span><span class="w"> </span>services/session.service.ts: Added retry logic for transient failures
<span class="k">-</span><span class="w"> </span>tests/auth.test.ts: Updated mock setup

<span class="gu">## Test Status</span>

14 passing, 2 failing (mock setup issues)

<span class="gu">## Next Steps</span>

<span class="k">1.</span> Fix remaining test failures (mock session service)
<span class="k">2.</span> Run full test suite
<span class="k">3.</span> Deploy to staging
</code></pre></div>
<p><strong>2. Opaque Compression</strong></p>
<p>Produce compressed representations optimized for reconstruction fidelity. Achieves highest compression ratios (99%+) but sacrifices interpretability. Use when maximum token savings required and re-fetching costs are low.</p>
<p><strong>3. Regenerative Full Summary</strong></p>
<p>Generate detailed structured summaries on each compression. Produces readable output but may lose details across repeated compression cycles.</p>
<h3 id="compression-comparison">Compression Comparison</h3>
<p>Research from Factory.ai <a href="#references">[4]</a> compared compression strategies on real production agent sessions:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Compression Ratio</th>
<th>Quality Score</th>
<th>Best For</th>
</tr>
</thead>
<tbody>
<tr>
<td>Anchored Iterative</td>
<td>98.6%</td>
<td>3.70/5</td>
<td>Long sessions, file tracking</td>
</tr>
<tr>
<td>Regenerative</td>
<td>98.7%</td>
<td>3.44/5</td>
<td>Clear phase boundaries</td>
</tr>
<tr>
<td>Opaque</td>
<td>99.3%</td>
<td>3.35/5</td>
<td>Maximum savings, short sessions</td>
</tr>
</tbody>
</table>
<p><strong>Understanding the metrics:</strong></p>
<ul>
<li>
<p><strong>Compression Ratio (98.6%)</strong>: The percentage of tokens removed. A 98.6% ratio means if you had 100,000 tokens of conversation history, only 1,400 tokens remain after compression (98,600 were removed).</p>
</li>
<li>
<p><strong>Quality Score (3.70/5)</strong>: Measured via probe-based evaluation‚Äîafter compression, the agent is asked questions that require recalling specific details from the truncated history (e.g., "What files did we modify?", "What was the error message?"). A score of 3.70/5 means the agent answered ~74% of probes correctly.</p>
</li>
<li>
<p><strong>0.7% additional tokens</strong>: Comparing Anchored Iterative (98.6%) to Opaque (99.3%), the difference is 0.7%. For a 100K token session: Anchored keeps 1,400 tokens, Opaque keeps only 700 tokens. That extra 700 tokens (0.7% of original) buys 0.35 quality points (3.70 vs 3.35)‚Äîmeaning significantly better recall of task-critical details.</p>
</li>
</ul>
<h3 id="the-artifact-trail-problem">The Artifact Trail Problem</h3>
<p><strong>Artifact trail integrity is the weakest dimension</strong> across all compression methods, scoring 2.2-2.5 out of 5.0. Coding agents need to know which files were created, modified, read‚Äîand compression often loses this.</p>
<p><strong>Recommendation</strong>: Implement a separate artifact index or explicit file-state tracking in agent scaffolding, beyond general summarization.</p>
<h3 id="compression-trigger-strategies">Compression Trigger Strategies</h3>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>Trigger Point</th>
<th>Trade-off</th>
</tr>
</thead>
<tbody>
<tr>
<td>Fixed threshold</td>
<td>70-80% utilization</td>
<td>Simple but may compress early</td>
</tr>
<tr>
<td>Sliding window</td>
<td>Keep last N turns + summary</td>
<td>Predictable context size</td>
</tr>
<tr>
<td>Importance-based</td>
<td>Compress low-relevance first</td>
<td>Complex but preserves signal</td>
</tr>
<tr>
<td>Task-boundary</td>
<td>Compress at task completions</td>
<td>Clean summaries, unpredictable timing</td>
</tr>
</tbody>
</table>
<h3 id="probe-based-evaluation">Probe-Based Evaluation</h3>
<p>Traditional metrics like ROUGE fail to capture functional compression quality. A summary may score high on lexical overlap while missing the one file path the agent needs.</p>
<p><strong>Probe-based evaluation</strong> directly measures quality by asking questions after compression:</p>
<table>
<thead>
<tr>
<th>Probe Type</th>
<th>What It Tests</th>
<th>Example Question</th>
</tr>
</thead>
<tbody>
<tr>
<td>Recall</td>
<td>Factual retention</td>
<td>"What was the original error message?"</td>
</tr>
<tr>
<td>Artifact</td>
<td>File tracking</td>
<td>"Which files have we modified?"</td>
</tr>
<tr>
<td>Continuation</td>
<td>Task planning</td>
<td>"What should we do next?"</td>
</tr>
<tr>
<td>Decision</td>
<td>Reasoning chain</td>
<td>"What did we decide about the Redis issue?"</td>
</tr>
</tbody>
</table>
<p>If compression preserved the right information, the agent answers correctly. If not, it guesses or hallucinates.</p>
<hr />
<h2 id="context-optimization-techniques">Context Optimization Techniques</h2>
<p>Context optimization extends effective capacity through strategic compression, masking, caching, and partitioning. <strong>These techniques build on the <a href="#context-compression-strategies">Context Compression Strategies</a> covered earlier</strong>, applying them systematically for production use. Effective optimization can <strong>double or triple effective context capacity</strong> without requiring larger models.</p>
<p><img alt="Optimization Techniques" src="../../../../assets/2025-10-05-context-engineering/optimization_techniques.svg" /></p>
<h3 id="compaction-strategies">Compaction Strategies</h3>
<p>Compaction summarizes context contents when approaching limits, then reinitializes with the summary. This distills contents in a high-fidelity manner, enabling continued operation with minimal degradation.</p>
<p><strong>Priority for compression</strong>:</p>
<ol>
<li>Tool outputs ‚Üí replace with summaries</li>
<li>Old turns ‚Üí summarize early conversation</li>
<li>Retrieved docs ‚Üí summarize if recent versions exist</li>
<li><strong>Never compress</strong>: system prompt</li>
</ol>
<p><strong>Effective summaries preserve different elements by type</strong>:</p>
<ul>
<li><strong>Tool outputs</strong>: Preserve key findings, metrics, conclusions. Remove verbose raw output.</li>
<li><strong>Conversational turns</strong>: Preserve decisions, commitments, context shifts. Remove filler.</li>
<li><strong>Retrieved documents</strong>: Preserve key facts and claims. Remove supporting elaboration.</li>
</ul>
<h3 id="observation-masking">Observation Masking</h3>
<p>Tool outputs can comprise <strong>over 80% of token usage</strong> <a href="#references">[4]</a>. Once an agent has used a tool output to make a decision, keeping the full output provides diminishing value.</p>
<p><strong>Masking decision matrix</strong>:</p>
<table>
<thead>
<tr>
<th>Category</th>
<th>Action</th>
<th>Reasoning</th>
</tr>
</thead>
<tbody>
<tr>
<td>Current task observations</td>
<td>Never mask</td>
<td>Critical to current work</td>
</tr>
<tr>
<td>Most recent turn</td>
<td>Never mask</td>
<td>Immediately relevant</td>
</tr>
<tr>
<td>Active reasoning</td>
<td>Never mask</td>
<td>In-progress thought</td>
</tr>
<tr>
<td>3+ turns ago</td>
<td>Consider masking</td>
<td>Purpose likely served</td>
</tr>
<tr>
<td>Repeated outputs</td>
<td>Always mask</td>
<td>Redundant</td>
</tr>
<tr>
<td>Boilerplate</td>
<td>Always mask</td>
<td>Low signal</td>
</tr>
</tbody>
</table>
<h3 id="kv-cache-optimization">KV-Cache Optimization</h3>
<p>The KV-cache stores Key and Value tensors computed during inference. Caching across requests with identical prefixes avoids recomputation, dramatically reducing cost and latency.</p>
<p><strong>Optimize for caching</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Stable content first (cacheable)</span>
<span class="n">context</span> <span class="o">=</span> <span class="p">[</span><span class="n">system_prompt</span><span class="p">,</span> <span class="n">tool_definitions</span><span class="p">]</span>
<span class="c1"># Frequently reused elements</span>
<span class="n">context</span> <span class="o">+=</span> <span class="p">[</span><span class="n">reused_templates</span><span class="p">]</span>
<span class="c1"># Unique elements last</span>
<span class="n">context</span> <span class="o">+=</span> <span class="p">[</span><span class="n">unique_content</span><span class="p">]</span>
</code></pre></div>
<p><strong>Design for cache stability</strong>: Avoid dynamic content like timestamps in prompts, use consistent formatting, keep structure stable across sessions.</p>
<h3 id="context-partitioning">Context Partitioning</h3>
<p>The most aggressive optimization is partitioning work across sub-agents with isolated contexts. Each sub-agent operates in a clean context focused on its subtask without carrying accumulated context from other subtasks.</p>
<p><strong>Result aggregation</strong>: Validate all partitions completed, merge compatible results, summarize if still too large.</p>
<h3 id="optimization-decision-framework">Optimization Decision Framework</h3>
<p><strong>When to optimize</strong>:</p>
<ul>
<li>Context utilization exceeds 70%</li>
<li>Response quality degrades in extended conversations</li>
<li>Costs increase due to long contexts</li>
<li>Latency increases with conversation length</li>
</ul>
<p><strong>What to apply</strong>:</p>
<ul>
<li>Tool outputs dominate ‚Üí observation masking</li>
<li>Retrieved documents dominate ‚Üí summarization or partitioning</li>
<li>Message history dominates ‚Üí compaction with summarization</li>
<li>Multiple components ‚Üí combine strategies</li>
</ul>
<p><strong>Target metrics</strong>:</p>
<ul>
<li>Compaction: 50-70% token reduction with &lt;5% quality degradation</li>
<li>Masking: 60-80% reduction in masked observations</li>
<li>Cache optimization: 70%+ hit rate for stable workloads</li>
</ul>
<hr />
<h2 id="how-to-cook-it-stepbystep">How to cook it (step‚Äëby‚Äëstep)</h2>
<p>Here's a practical recipe to implement the context layer in your agentic system. Start simple, then add complexity only when needed.</p>
<h3 id="step-1-write-the-contract">Step 1: Write the contract</h3>
<p>Define what your agent must do and how it should behave.</p>
<p><strong>Actions</strong>:</p>
<ul>
<li>Write system-level policies: role, constraints, safety rules</li>
<li>Write developer guidelines: output format, tone, citation requirements</li>
<li>Define JSON Schemas for all outputs: <code>AnswerSchema</code>, <code>PlanSchema</code>, <code>StepResultSchema</code></li>
</ul>
<h3 id="step-2-pick-retrieval-strategy">Step 2: Pick retrieval strategy</h3>
<p>Start with hybrid retrieval (BM25 + vector) + reranker.</p>
<p><strong>Decision tree</strong>:</p>
<ul>
<li>Query is general knowledge? ‚Üí No retrieval (parametric)</li>
<li>Query needs fresh/private facts? ‚Üí Single-shot RAG (hybrid + rerank)</li>
<li>Query is complex/multi-part? ‚Üí Iterative RAG (break into subqueries)</li>
</ul>
<h3 id="step-3-design-memory">Step 3: Design memory</h3>
<p>Split short-term (conversation state) from long-term (user facts, history).</p>
<p><strong>Actions</strong>:</p>
<ul>
<li>Short-term: store conversation state, last few turns. Clear after session.</li>
<li>Long-term: store user entities, preferences, episodic events.</li>
<li>Set expiry rules: preferences 365d, episodic 90d, short-term session-only.</li>
<li>Add PII redaction before storing anything.</li>
</ul>
<h3 id="step-4-specify-tools">Step 4: Specify tools</h3>
<p>Define clear tool signatures with validation and fallback strategies.</p>
<p><strong>Actions</strong>:</p>
<ul>
<li>For each tool: write clear docstring, input schema, output schema</li>
<li>Mark idempotency: is it safe to retry?</li>
<li>Define postconditions and fallback chains</li>
<li>Validate tool arguments against schema <em>before</em> calling</li>
</ul>
<h3 id="step-5-install-guardrails">Step 5: Install guardrails</h3>
<p>Add input and output validation, safety filters, and policy enforcement.</p>
<p><strong>Quick checklist</strong>:</p>
<ul>
<li>[ ] Redact PII (emails, SSNs, credit cards) before processing</li>
<li>[ ] Validate all outputs against JSON Schema</li>
<li>[ ] Block prompt injection attempts</li>
<li>[ ] Rate limit tool calls</li>
<li>[ ] Log all policy violations for auditing</li>
</ul>
<h3 id="step-6-add-observability-evals">Step 6: Add observability &amp; evals</h3>
<p>Instrument your context layer so you can debug and improve it.</p>
<p><strong>Essential traces</strong>:</p>
<ul>
<li>Which context sources loaded?</li>
<li>Token counts: input, output, cost</li>
<li>Retrieval metrics: query, top-k results, sources cited</li>
<li>Tool calls: which tools, arguments, results, failures</li>
<li>Guardrail triggers: input blocks, output repairs, policy refusals</li>
</ul>
<p><strong>Metrics to track</strong>:</p>
<ol>
<li><strong>Exactness (schema validity)</strong>: Target 99%+</li>
<li><strong>Groundedness (citation rate)</strong>: Target 90%+ for knowledge queries</li>
<li><strong>Latency</strong>: Target &lt;2s p95</li>
<li><strong>Cost</strong>: Target &lt;$0.05 per query</li>
</ol>
<h3 id="step-7-iterate">Step 7: Iterate</h3>
<p>Start with basics. Add advanced patterns only when you hit clear limits.</p>
<p><strong>When to add</strong>:</p>
<ul>
<li><strong>Reflections</strong>: when error rate &gt; 5%</li>
<li><strong>Planners</strong>: when tasks require &gt; 3 sequential steps</li>
<li><strong>Sub-agents</strong>: when you have distinct domains</li>
</ul>
<hr />
<h2 id="antipatterns">Anti‚Äëpatterns</h2>
<p>Common mistakes that kill agentic systems. Avoid these.</p>
<h3 id="1-stuff-the-window">1. Stuff-the-window</h3>
<p><strong>What</strong>: Dump every possible document, memory, and example into context on every query.</p>
<p><strong>Why it fails</strong>: Context rot. Signal-to-noise ratio collapses. See <a href="#context-degradation-patterns">Context Degradation Patterns</a> for details on distraction and confusion.</p>
<p><strong>Fix</strong>: Route adaptively. Use compression and masking. See <a href="#context-optimization-techniques">Context Optimization Techniques</a>.</p>
<hr />
<h3 id="2-unvalidated-tool-results">2. Unvalidated tool results</h3>
<p><strong>What</strong>: Agent calls a tool, gets back data, and immediately feeds it to the model without checking.</p>
<p><strong>Why it fails</strong>: Malformed data crashes downstream logic. Null results cause hallucinations. This is a primary vector for <a href="#context-poisoning">Context Poisoning</a>.</p>
<p><strong>Fix</strong>: Always validate tool results against schema and postconditions.</p>
<hr />
<h3 id="3-one-shot-everything">3. One-shot everything</h3>
<p><strong>What</strong>: Cram system policy, developer guidelines, examples, user query, memory, and knowledge into a single monolithic prompt.</p>
<p><strong>Why it fails</strong>: No separation of concerns. Context window fills with duplicate boilerplate.</p>
<p><strong>Fix</strong>: Separate durable instructions from step-specific context. Use <a href="#kv-cache-optimization">KV-Cache Optimization</a> patterns.</p>
<hr />
<h3 id="4-unbounded-memory">4. Unbounded memory</h3>
<p><strong>What</strong>: Store every user interaction forever. Load all of it on every query.</p>
<p><strong>Why it fails</strong>: Context fills with stale, irrelevant memories. Privacy risks. See <a href="#the-lost-in-middle-phenomenon">Lost-in-Middle</a> for why middle content gets ignored anyway.</p>
<p><strong>Fix</strong>: Set retention policies. Implement scoped retrieval. Redact PII.</p>
<hr />
<h3 id="5-rag-everywhere">5. RAG everywhere</h3>
<p><strong>What</strong>: Retrieve documents for every single query, even "What is 2+2?" or "Hello".</p>
<p><strong>Why it fails</strong>: Wastes latency and cost. Retrieval can inject noise that causes <a href="#context-distraction">Context Distraction</a>.</p>
<p><strong>Fix</strong>: Implement adaptive RAG routing. Use classifiers or heuristics.</p>
<hr />
<h3 id="6-ignoring-guardrail-triggers">6. Ignoring guardrail triggers</h3>
<p><strong>What</strong>: Log guardrail violations but never review them.</p>
<p><strong>Why it fails</strong>: You miss real attacks. You miss UX issues. Schema repairs shouldn't be frequent‚Äîif they are, your instructions are unclear.</p>
<p><strong>Fix</strong>: Review guardrail triggers weekly.</p>
<hr />
<h3 id="7-no-evals">7. No evals</h3>
<p><strong>What</strong>: Ship context layer changes without testing them.</p>
<p><strong>Why it fails</strong>: Silent regressions. No way to compare variants objectively.</p>
<p><strong>Fix</strong>: Define 5‚Äì10 eval scenarios before shipping. Run on every change. Use <a href="#probe-based-evaluation">Probe-Based Evaluation</a> to catch compression quality issues.</p>
<hr />
<h2 id="quick-wins-ship-these-today">Quick wins: ship these today</h2>
<p>If you already have an agent in production and want immediate improvements, start here. Each takes &lt; 1 day.</p>
<h3 id="1-add-output-schema-validation">1. Add output schema validation</h3>
<p><strong>Impact</strong>: Catch the majority of errors before they reach users.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">jsonschema</span><span class="w"> </span><span class="kn">import</span> <span class="n">validate</span><span class="p">,</span> <span class="n">ValidationError</span>

<span class="k">def</span><span class="w"> </span><span class="nf">validate_output</span><span class="p">(</span><span class="n">output</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">validate</span><span class="p">(</span><span class="n">instance</span><span class="o">=</span><span class="n">output</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">ANSWER_SCHEMA</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">output</span>
    <span class="k">except</span> <span class="n">ValidationError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">repaired</span> <span class="o">=</span> <span class="n">auto_repair</span><span class="p">(</span><span class="n">output</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
        <span class="n">validate</span><span class="p">(</span><span class="n">instance</span><span class="o">=</span><span class="n">repaired</span><span class="p">,</span> <span class="n">schema</span><span class="o">=</span><span class="n">ANSWER_SCHEMA</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">repaired</span>
</code></pre></div>
<h3 id="2-instrument-basic-tracing">2. Instrument basic tracing</h3>
<p><strong>Impact</strong>: Debug significantly faster when things break.</p>
<div class="highlight"><pre><span></span><code><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span>
    <span class="s2">&quot;request_id&quot;</span><span class="p">:</span> <span class="n">request_id</span><span class="p">,</span>
    <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="n">query</span><span class="p">,</span>
    <span class="s2">&quot;context_loaded&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;instructions&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;memory&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;knowledge&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">},</span>
    <span class="s2">&quot;tokens&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;input&quot;</span><span class="p">:</span> <span class="mi">1200</span><span class="p">,</span> <span class="s2">&quot;output&quot;</span><span class="p">:</span> <span class="mi">150</span><span class="p">},</span>
    <span class="s2">&quot;latency_ms&quot;</span><span class="p">:</span> <span class="mi">1120</span><span class="p">,</span>
    <span class="s2">&quot;result&quot;</span><span class="p">:</span> <span class="s2">&quot;success&quot;</span>
<span class="p">}))</span>
</code></pre></div>
<h3 id="3-split-system-vs-user-messages">3. Split system vs user messages</h3>
<p><strong>Impact</strong>: Reduce token waste significantly by enabling <a href="#kv-cache-optimization">KV-Cache Optimization</a>.</p>
<div class="highlight"><pre><span></span><code><span class="n">messages</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">SYSTEM_POLICY</span> <span class="o">+</span> <span class="n">DEVELOPER_GUIDELINES</span><span class="p">},</span>
    <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="sa">f</span><span class="s2">&quot;Query: </span><span class="si">{</span><span class="n">query</span><span class="si">}</span><span class="se">\n</span><span class="s2">Memory: </span><span class="si">{</span><span class="n">memory</span><span class="si">}</span><span class="se">\n</span><span class="s2">Knowledge: </span><span class="si">{</span><span class="n">knowledge</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">}</span>
<span class="p">]</span>
</code></pre></div>
<h3 id="4-add-citation-requirements">4. Add citation requirements</h3>
<p><strong>Impact</strong>: Build trust, enable auditing, reduce hallucinations.</p>
<h3 id="5-set-memory-expiry">5. Set memory expiry</h3>
<p><strong>Impact</strong>: Prevent context pollution and privacy risks.</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">load_memory</span><span class="p">(</span><span class="n">customer_id</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="n">entries</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">get_memory</span><span class="p">(</span><span class="n">customer_id</span><span class="p">)</span>
    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">entries</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;expires_at&quot;</span><span class="p">,</span> <span class="n">now</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">now</span>
    <span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="conclusion">Conclusion</h2>
<p>Context engineering is the discipline that separates demo agents from production agents. The model didn't get worse‚Äîthe context did. By understanding:</p>
<ul>
<li><strong>Fundamentals</strong>: Context is finite, attention is limited, progressive disclosure is key</li>
<li><strong>Degradation</strong>: Lost-in-middle, poisoning, distraction, confusion, clash</li>
<li><strong>Compression</strong>: Tokens-per-task over tokens-per-request, structured summaries</li>
<li><strong>Optimization</strong>: Compaction, masking, caching, partitioning</li>
</ul>
<p>...you can build agents that work reliably at scale.</p>
<p>Start with the quick wins. Add complexity only when you hit clear limits. And always measure‚Äîyou can't improve what you don't trace.</p>
<hr />
<p><em>This article incorporates content from the Agent Skills for Context Engineering collection, a set of reusable knowledge modules for building better AI agents.</em></p>
<hr />
<h2 id="references">References</h2>
<ol>
<li>
<p><strong>Liu, N. F., Lin, K., Hewitt, J., Paranjape, A., Bevilacqua, M., Petroni, F., &amp; Liang, P. (2023).</strong> "Lost in the Middle: How Language Models Use Long Contexts." <em>arXiv preprint arXiv:2307.03172</em>. <a href="https://arxiv.org/abs/2307.03172">https://arxiv.org/abs/2307.03172</a></p>
<ul>
<li>Key finding: 10-40% lower recall accuracy for information in the middle of context vs. beginning/end.</li>
</ul>
</li>
<li>
<p><strong>Xiao, G., Tian, Y., Chen, B., Han, S., &amp; Lewis, M. (2023).</strong> "Efficient Streaming Language Models with Attention Sinks." <em>ICLR 2024</em>. <a href="https://arxiv.org/abs/2309.17453">https://arxiv.org/abs/2309.17453</a></p>
<ul>
<li>Introduces the "attention sink" phenomenon where LLMs allocate disproportionate attention to initial tokens.</li>
</ul>
</li>
<li>
<p><strong>Hsieh, C. Y., et al. (2024).</strong> "RULER: What's the Real Context Size of Your Long-Context Language Models?" <em>COLM 2024</em>. <a href="https://arxiv.org/abs/2404.06654">https://arxiv.org/abs/2404.06654</a></p>
<ul>
<li>Key finding: Only 50% of models claiming 32K+ context maintain satisfactory performance at 32K tokens.</li>
</ul>
</li>
<li>
<p><strong>Factory.ai Research. (2025).</strong> "Evaluating Context Compression for AI Agents." <a href="https://www.factory.ai/blog/evaluating-context-compression">https://www.factory.ai/blog/evaluating-context-compression</a></p>
<ul>
<li>Source for compression strategy comparisons, tokens-per-task optimization, and probe-based evaluation methodology.</li>
</ul>
</li>
<li>
<p><strong>Li, Y., et al. (2023).</strong> "Compressing Context to Enhance Inference Efficiency of Large Language Models." <em>EMNLP 2023</em>.</p>
<ul>
<li>Research on selective context pruning using self-information metrics.</li>
</ul>
</li>
<li>
<p><strong>Anthropic. (2024).</strong> "Model Context Protocol (MCP) Specification." <a href="https://modelcontextprotocol.io/">https://modelcontextprotocol.io/</a></p>
<ul>
<li>Official specification for the MCP standard for AI-tool integration.</li>
</ul>
</li>
<li>
<p><strong>LangChain/LangGraph. (2024).</strong> "How to add memory to the prebuilt ReAct agent." <a href="https://langchain-ai.github.io/langgraph/how-tos/create-react-agent-memory/">https://langchain-ai.github.io/langgraph/how-tos/create-react-agent-memory/</a>
   ‚Äî Demonstrates that summarization is one technique for managing memory within context limits.</p>
</li>
<li>
<p><strong>Yoran, O., Wolfson, T., Bogin, B., Katz, U., Deutch, D., &amp; Berant, J. (2024).</strong> "Making Retrieval-Augmented Language Models Robust to Irrelevant Context." <em>ICLR 2024</em>. <a href="https://arxiv.org/abs/2310.01558">https://arxiv.org/abs/2310.01558</a></p>
<ul>
<li>Key finding: Even a single irrelevant document can significantly reduce RAG performance, creating a "distracting effect."</li>
</ul>
</li>
<li>
<p><strong>Maekawa, S., et al. (2025).</strong> "NoLiMa: Long-Context Evaluation Beyond Literal Matching." <em>ICML 2025</em>. <a href="https://arxiv.org/abs/2502.05167">https://arxiv.org/abs/2502.05167</a></p>
<ul>
<li>Key finding: GPT-4o effective context ~8K tokens, Claude 3.5 Sonnet ~4K tokens when latent reasoning is required (vs. literal matching). At 32K tokens, GPT-4o drops from 99.3% to 69.7% accuracy.</li>
</ul>
</li>
</ol>
<h3 id="additional-resources">Additional Resources</h3>
<ul>
<li><strong>Anthropic Claude Documentation</strong>: Best practices for long-context usage</li>
<li><strong>OpenAI Cookbook</strong>: Strategies for managing context windows</li>
<li><strong>LangChain Documentation</strong>: Memory and retrieval patterns</li>
<li><strong>LlamaIndex Documentation</strong>: RAG and chunking strategies</li>
</ul>







  
  




  


 
  </article>
</div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
    <a href="https://www.linkedin.com/in/slavadubrov" target="_blank" rel="noopener" title="LinkedIn" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://slavadubrov.substack.com/" target="_blank" rel="noopener" title="Substack" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22.539 8.242H1.46V5.406h21.08zM1.46 10.812V24L12 18.11 22.54 24V10.812zM22.54 0H1.46v2.836h21.08z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/slavadubrov" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="/feed_rss_created.xml" target="_blank" rel="noopener" title="RSS" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6.18 15.64a2.18 2.18 0 0 1 2.18 2.18C8.36 19 7.38 20 6.18 20 5 20 4 19 4 17.82a2.18 2.18 0 0 1 2.18-2.18M4 4.44A15.56 15.56 0 0 1 19.56 20h-2.83A12.73 12.73 0 0 0 4 7.27zm0 5.66a9.9 9.9 0 0 1 9.9 9.9h-2.83A7.07 7.07 0 0 0 4 12.93z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.path", "navigation.indexes", "navigation.toc", "navigation.toc.sticky", "navigation.toc.maxdepth", "navigation.toc.title", "navigation.toc.collapse", "navigation.toc.collapse_empty_groups", "navigation.toc.collapse_single_children", "content.code.copy"], "search": "../../../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js"></script>
      
        <script src="../../../../../javascripts/mermaid-init.js"></script>
      
        <script src="../../../../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>