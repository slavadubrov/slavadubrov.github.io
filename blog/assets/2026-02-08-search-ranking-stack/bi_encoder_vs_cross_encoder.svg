<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 380" font-family="'Segoe UI', system-ui, -apple-system, sans-serif">
  <defs>
    <marker id="arrowBvC" markerWidth="8" markerHeight="6" refX="8" refY="3" orient="auto">
      <path d="M0,0 L8,3 L0,6 Z" fill="#555"/>
    </marker>
    <filter id="shadowBvC" x="-2%" y="-2%" width="104%" height="108%">
      <feDropShadow dx="1" dy="2" stdDeviation="2" flood-opacity="0.1"/>
    </filter>
  </defs>

  <!-- Title -->
  <text x="400" y="28" text-anchor="middle" font-size="18" font-weight="700" fill="#1a1a2e">Bi-Encoder vs. Cross-Encoder</text>

  <!-- Left: Bi-Encoder -->
  <rect x="30" y="50" width="350" height="310" rx="10" fill="#f9fafb" stroke="#ddd" stroke-width="1"/>
  <text x="205" y="75" text-anchor="middle" font-size="14" font-weight="700" fill="#1565c0">Bi-Encoder (Stage 1)</text>
  <text x="205" y="93" text-anchor="middle" font-size="11" fill="#666">Independent encoding -- fast but shallow</text>

  <!-- Query path -->
  <rect x="60" y="115" width="120" height="34" rx="6" fill="#e3f2fd" stroke="#1565c0" stroke-width="1.2" filter="url(#shadowBvC)"/>
  <text x="120" y="137" text-anchor="middle" font-size="12" font-weight="600" fill="#1565c0">Query</text>
  <line x1="120" y1="149" x2="120" y2="172" stroke="#555" stroke-width="1.2" marker-end="url(#arrowBvC)"/>
  <rect x="60" y="175" width="120" height="34" rx="6" fill="#bbdefb" stroke="#1565c0" stroke-width="1.2" filter="url(#shadowBvC)"/>
  <text x="120" y="197" text-anchor="middle" font-size="11" font-weight="600" fill="#0d47a1">Encoder</text>
  <line x1="120" y1="209" x2="120" y2="232" stroke="#555" stroke-width="1.2" marker-end="url(#arrowBvC)"/>
  <rect x="55" y="235" width="130" height="28" rx="6" fill="#e8eaf6" stroke="#3949ab" stroke-width="1" filter="url(#shadowBvC)"/>
  <text x="120" y="254" text-anchor="middle" font-size="11" fill="#3949ab">Query Embedding</text>

  <!-- Doc path -->
  <rect x="230" y="115" width="120" height="34" rx="6" fill="#fff3e0" stroke="#e65100" stroke-width="1.2" filter="url(#shadowBvC)"/>
  <text x="290" y="137" text-anchor="middle" font-size="12" font-weight="600" fill="#e65100">Document</text>
  <line x1="290" y1="149" x2="290" y2="172" stroke="#555" stroke-width="1.2" marker-end="url(#arrowBvC)"/>
  <rect x="230" y="175" width="120" height="34" rx="6" fill="#ffe0b2" stroke="#e65100" stroke-width="1.2" filter="url(#shadowBvC)"/>
  <text x="290" y="197" text-anchor="middle" font-size="11" font-weight="600" fill="#bf360c">Encoder</text>
  <line x1="290" y1="209" x2="290" y2="232" stroke="#555" stroke-width="1.2" marker-end="url(#arrowBvC)"/>
  <rect x="225" y="235" width="130" height="28" rx="6" fill="#fff8e1" stroke="#f57f17" stroke-width="1" filter="url(#shadowBvC)"/>
  <text x="290" y="254" text-anchor="middle" font-size="11" fill="#e65100">Doc Embedding</text>

  <!-- Dot product -->
  <line x1="120" y1="263" x2="180" y2="293" stroke="#555" stroke-width="1.2" marker-end="url(#arrowBvC)"/>
  <line x1="290" y1="263" x2="230" y2="293" stroke="#555" stroke-width="1.2" marker-end="url(#arrowBvC)"/>
  <rect x="160" y="290" width="90" height="30" rx="6" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1.2" filter="url(#shadowBvC)"/>
  <text x="205" y="310" text-anchor="middle" font-size="11" font-weight="600" fill="#2e7d32">Dot Product</text>
  <text x="205" y="340" text-anchor="middle" font-size="10" fill="#888">~17ms for 100K items</text>

  <!-- No cross-attention label -->
  <line x1="180" y1="190" x2="230" y2="190" stroke="#e74c3c" stroke-width="1.5" stroke-dasharray="4"/>
  <text x="205" y="185" text-anchor="middle" font-size="9" fill="#e74c3c">No interaction</text>

  <!-- Right: Cross-Encoder -->
  <rect x="420" y="50" width="350" height="310" rx="10" fill="#f9fafb" stroke="#ddd" stroke-width="1"/>
  <text x="595" y="75" text-anchor="middle" font-size="14" font-weight="700" fill="#c62828">Cross-Encoder (Stage 3)</text>
  <text x="595" y="93" text-anchor="middle" font-size="11" fill="#666">Joint encoding -- slow but deep</text>

  <!-- Concatenated input -->
  <rect x="455" y="115" width="280" height="34" rx="6" fill="#fce4ec" stroke="#c62828" stroke-width="1.2" filter="url(#shadowBvC)"/>
  <text x="595" y="137" text-anchor="middle" font-size="12" font-weight="600" fill="#c62828">[CLS] Query [SEP] Document [SEP]</text>

  <line x1="595" y1="149" x2="595" y2="172" stroke="#555" stroke-width="1.2" marker-end="url(#arrowBvC)"/>

  <!-- Transformer block -->
  <rect x="475" y="175" width="240" height="75" rx="8" fill="#ffcdd2" stroke="#c62828" stroke-width="1.5" filter="url(#shadowBvC)"/>
  <text x="595" y="200" text-anchor="middle" font-size="13" font-weight="700" fill="#b71c1c">Transformer</text>
  <text x="595" y="218" text-anchor="middle" font-size="11" fill="#c62828">Full Cross-Attention</text>
  <text x="595" y="236" text-anchor="middle" font-size="10" fill="#888">Every query token attends to every doc token</text>

  <line x1="595" y1="250" x2="595" y2="283" stroke="#555" stroke-width="1.2" marker-end="url(#arrowBvC)"/>

  <!-- Score output -->
  <rect x="530" y="286" width="130" height="34" rx="6" fill="#e8f5e9" stroke="#2e7d32" stroke-width="1.2" filter="url(#shadowBvC)"/>
  <text x="595" y="308" text-anchor="middle" font-size="12" font-weight="600" fill="#2e7d32">Relevance Score</text>
  <text x="595" y="340" text-anchor="middle" font-size="10" fill="#888">~300ms for 50 candidates</text>

</svg>
