<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 420 380">
  <defs>
    <linearGradient id="planGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#667eea"/>
      <stop offset="100%" style="stop-color:#764ba2"/>
    </linearGradient>
    <linearGradient id="execGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f093fb"/>
      <stop offset="100%" style="stop-color:#f5576c"/>
    </linearGradient>
    <linearGradient id="replanGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4facfe"/>
      <stop offset="100%" style="stop-color:#00f2fe"/>
    </linearGradient>
    <filter id="shadow3" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    <marker id="arrowhead3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="420" height="380" fill="#f8fafc"/>

  <!-- Title -->
  <text x="180" y="28" text-anchor="middle" font-family="system-ui, sans-serif" font-size="16" font-weight="600" fill="#1e293b">Plan-and-Execute Pattern</text>

  <!-- Planner Box -->
  <rect x="105" y="50" width="150" height="45" rx="8" fill="url(#planGrad)" filter="url(#shadow3)"/>
  <text x="180" y="78" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="500" fill="white">Planner</text>

  <!-- Plan Label - repositioned to fit within canvas -->
  <text x="268" y="68" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">← High-level plan</text>
  <text x="268" y="80" font-family="system-ui, sans-serif" font-size="10" fill="#64748b">   (4-6 steps)</text>

  <!-- Arrow down to executor -->
  <path d="M180 95 L180 120" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead3)"/>

  <!-- Executor Container -->
  <rect x="45" y="125" width="270" height="125" rx="10" fill="none" stroke="#cbd5e1" stroke-width="1.5"/>
  <text x="180" y="145" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" font-weight="500" fill="#475569">Executor (ReAct Agent)</text>

  <!-- Step 1 -->
  <rect x="65" y="158" width="230" height="24" rx="5" fill="url(#execGrad)" opacity="0.9"/>
  <text x="180" y="175" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="white">Step 1: Thought → Action → Observe</text>

  <!-- Step 2 -->
  <rect x="65" y="190" width="230" height="24" rx="5" fill="url(#execGrad)" opacity="0.7"/>
  <text x="180" y="207" text-anchor="middle" font-family="system-ui, sans-serif" font-size="10" fill="white">Step 2: Thought → Action → Observe</text>

  <!-- Dots -->
  <text x="180" y="235" text-anchor="middle" font-family="system-ui, sans-serif" font-size="12" fill="#64748b">···</text>

  <!-- Arrow down to replanner -->
  <path d="M180 250 L180 275" stroke="#64748b" stroke-width="2" fill="none" marker-end="url(#arrowhead3)"/>

  <!-- Replanner Box -->
  <rect x="105" y="280" width="150" height="45" rx="8" fill="url(#replanGrad)" filter="url(#shadow3)"/>
  <text x="180" y="308" text-anchor="middle" font-family="system-ui, sans-serif" font-size="14" font-weight="500" fill="white">Replanner</text>

  <!-- Loop Arrow - from Replanner back to Executor -->
  <path d="M255 302 Q340 302 340 210 Q340 125 320 125" stroke="#64748b" stroke-width="2" fill="none" stroke-dasharray="5,3"/>
  <polygon points="320,120 320,130 310,125" fill="#64748b"/>
  <!-- Loop label - positioned along the arrow path -->
  <text x="355" y="215" font-family="system-ui, sans-serif" font-size="9" fill="#64748b" transform="rotate(90 355 215)">Adjust plan if needed</text>

  <!-- Complete Label -->
  <text x="180" y="360" text-anchor="middle" font-family="system-ui, sans-serif" font-size="11" fill="#64748b" font-style="italic">Next step or complete</text>
</svg>
