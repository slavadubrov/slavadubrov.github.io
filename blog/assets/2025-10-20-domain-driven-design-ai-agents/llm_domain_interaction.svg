<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 850 350">
  <defs>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-color="#000000" flood-opacity="0.15"/>
    </filter>
    <linearGradient id="grad-llm" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#faf5ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#f3e8ff;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-acl" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#f0fdf4;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#dcfce7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="grad-domain" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#eff6ff;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#dbeafe;stop-opacity:1" />
    </linearGradient>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
    </marker>
    <marker id="arrowhead-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ef4444" />
    </marker>
  </defs>

  <!-- LLM (Left) -->
  <g transform="translate(50, 50)" filter="url(#shadow)">
    <!-- "Cloud" shape approximation using rounded rect -->
    <rect width="200" height="250" rx="20" fill="url(#grad-llm)" stroke="#a855f7" stroke-width="2" />
    <text x="100" y="40" font-family="sans-serif" font-size="20" font-weight="bold" fill="#6b21a8" text-anchor="middle">LLM</text>
    <text x="100" y="65" font-family="sans-serif" font-size="12" fill="#7e22ce" text-anchor="middle">Probabilistic / Creative</text>
    
    <!-- Simulated text content -->
    <rect x="30" y="90" width="140" height="120" fill="#ffffff" rx="5" stroke="#e9d5ff" />
    <text x="40" y="115" font-family="monospace" font-size="11" fill="#4b5563">"Sure! I'll add</text>
    <text x="40" y="130" font-family="monospace" font-size="11" fill="#4b5563">a task to buy</text>
    <text x="40" y="145" font-family="monospace" font-size="11" fill="#4b5563">milk..."</text>
    <text x="100" y="230" font-family="sans-serif" font-size="12" font-style="italic" fill="#9333ea" text-anchor="middle">(Unstructured)</text>
  </g>

  <!-- ACL (Middle) -->
  <g transform="translate(325, 50)" filter="url(#shadow)">
    <rect width="200" height="250" rx="10" fill="url(#grad-acl)" stroke="#22c55e" stroke-width="2" />
    <text x="100" y="40" font-family="sans-serif" font-size="18" font-weight="bold" fill="#15803d" text-anchor="middle">Anti-Corruption</text>
    <text x="100" y="60" font-family="sans-serif" font-size="18" font-weight="bold" fill="#15803d" text-anchor="middle">Layer</text>
    
    <g transform="translate(25, 90)">
      <rect width="150" height="30" rx="5" fill="#ffffff" stroke="#86efac" />
      <text x="75" y="20" font-family="sans-serif" font-size="12" fill="#16a34a" text-anchor="middle">1. Validate Schema</text>
    </g>
    <g transform="translate(25, 130)">
      <rect width="150" height="30" rx="5" fill="#ffffff" stroke="#86efac" />
      <text x="75" y="20" font-family="sans-serif" font-size="12" fill="#16a34a" text-anchor="middle">2. Sanitize Values</text>
    </g>
    <g transform="translate(25, 170)">
      <rect width="150" height="30" rx="5" fill="#ffffff" stroke="#86efac" />
      <text x="75" y="20" font-family="sans-serif" font-size="12" fill="#16a34a" text-anchor="middle">3. Translate to Domain</text>
    </g>
  </g>

  <!-- Domain (Right) -->
  <g transform="translate(600, 50)" filter="url(#shadow)">
    <rect width="200" height="250" rx="5" fill="url(#grad-domain)" stroke="#3b82f6" stroke-width="2" />
    <text x="100" y="40" font-family="sans-serif" font-size="20" font-weight="bold" fill="#1e40af" text-anchor="middle">Domain Model</text>
    <text x="100" y="65" font-family="sans-serif" font-size="12" fill="#1e3a8a" text-anchor="middle">Deterministic / Safe</text>
    
    <rect x="30" y="90" width="140" height="120" fill="#ffffff" rx="2" stroke="#bfdbfe" />
    <text x="40" y="115" font-family="monospace" font-size="11" fill="#1e3a8a">Task(</text>
    <text x="50" y="130" font-family="monospace" font-size="11" fill="#1e3a8a">id="123",</text>
    <text x="50" y="145" font-family="monospace" font-size="11" fill="#1e3a8a">desc="buy milk"</text>
    <text x="40" y="160" font-family="monospace" font-size="11" fill="#1e3a8a">)</text>
    
    <text x="100" y="230" font-family="sans-serif" font-size="12" font-weight="bold" fill="#2563eb" text-anchor="middle">Valid Entity</text>
  </g>

  <!-- Arrows -->
  <path d="M 250 150 L 325 150" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)" />
  <path d="M 525 150 L 600 150" stroke="#64748b" stroke-width="2" marker-end="url(#arrowhead)" />

  <!-- Feedback Loop -->
  <path d="M 325 250 L 250 250" stroke="#ef4444" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead-red)" />
  <text x="287" y="240" font-family="sans-serif" font-size="11" fill="#ef4444" text-anchor="middle">Retry</text>

</svg>
