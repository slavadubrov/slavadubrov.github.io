<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 900 480" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="dataGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#10b981"/>
      <stop offset="100%" stop-color="#059669"/>
    </linearGradient>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#10b981"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="480" fill="#fafafa"/>

  <!-- Title -->
  <text x="450" y="35" font-family="system-ui, -apple-system, sans-serif" font-size="20" font-weight="600" text-anchor="middle" fill="#1a202c">Data Preparation Pipeline: "Data is Destiny"</text>

  <!-- Raw Data -->
  <g transform="translate(40, 70)">
    <rect width="120" height="55" rx="6" fill="#e5e7eb" stroke="#9ca3af" stroke-width="1.5"/>
    <text x="60" y="28" font-family="system-ui, sans-serif" font-size="12" font-weight="600" text-anchor="middle" fill="#374151">Raw Data</text>
    <text x="60" y="44" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#6b7280">Unprocessed corpus</text>
  </g>

  <path d="M 160 97 L 190 97" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

  <!-- Stage 1: Ingestion -->
  <g transform="translate(200, 70)">
    <rect width="130" height="55" rx="6" fill="url(#dataGrad)"/>
    <text x="65" y="24" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">1. Ingestion</text>
    <text x="65" y="40" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">Remove refusals,</text>
    <text x="65" y="50" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">broken UTF-8</text>
  </g>
  <text x="265" y="140" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#059669" font-style="italic">Trafilatura + FastText</text>

  <path d="M 330 97 L 360 97" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

  <!-- Stage 2: PII -->
  <g transform="translate(370, 70)">
    <rect width="130" height="55" rx="6" fill="url(#dataGrad)"/>
    <text x="65" y="24" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">2. PII Scrubbing</text>
    <text x="65" y="40" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">Redact emails, IPs,</text>
    <text x="65" y="50" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">phone numbers</text>
  </g>
  <text x="435" y="140" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#059669" font-style="italic">Microsoft Presidio</text>

  <path d="M 500 97 L 530 97" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

  <!-- Stage 3: Dedup -->
  <g transform="translate(540, 70)">
    <rect width="130" height="55" rx="6" fill="url(#dataGrad)"/>
    <text x="65" y="24" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">3. Deduplication</text>
    <text x="65" y="40" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">MinHash LSH to</text>
    <text x="65" y="50" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">remove duplicates</text>
  </g>
  <text x="605" y="140" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#059669" font-style="italic">DataTrove</text>

  <path d="M 670 97 L 700 97" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

  <!-- Stage 4: Augmentation -->
  <g transform="translate(710, 70)">
    <rect width="130" height="55" rx="6" fill="url(#dataGrad)"/>
    <text x="65" y="24" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">4. Augmentation</text>
    <text x="65" y="40" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">Teacher model</text>
    <text x="65" y="50" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">rewrites data</text>
  </g>
  <text x="775" y="140" font-family="system-ui, sans-serif" font-size="8" text-anchor="middle" fill="#059669" font-style="italic">Distilabel</text>

  <!-- Arrow down and left -->
  <path d="M 775 125 L 775 170 L 545 170" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

  <!-- Stage 5: Formatting -->
  <g transform="translate(370, 155)">
    <rect width="165" height="55" rx="6" fill="url(#dataGrad)"/>
    <text x="82" y="24" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">5. Formatting</text>
    <text x="82" y="40" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">Convert to Alpaca / ShareGPT</text>
    <text x="82" y="50" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">JSONL format</text>
  </g>

  <path d="M 370 182 L 220 182" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

  <!-- Clean Dataset -->
  <g transform="translate(80, 155)">
    <rect width="130" height="55" rx="6" fill="#d1fae5" stroke="#10b981" stroke-width="2"/>
    <text x="65" y="28" font-family="system-ui, sans-serif" font-size="12" font-weight="600" text-anchor="middle" fill="#065f46">Clean Dataset</text>
    <text x="65" y="44" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#047857">Ready for fine-tuning</text>
  </g>

  <!-- Key Principles Box -->
  <rect x="40" y="250" width="820" height="200" rx="8" fill="#f0fdf4" stroke="#10b981" stroke-width="1.5"/>
  <text x="60" y="280" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#065f46">Key Principles</text>

  <circle cx="60" cy="310" r="4" fill="#10b981"/>
  <text x="75" y="314" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#1f2937">Quality over Quantity:</text>
  <text x="210" y="314" font-family="system-ui, sans-serif" font-size="11" fill="#4b5563">500-1,000 curated examples often outperform 50,000 noisy ones</text>

  <circle cx="60" cy="345" r="4" fill="#10b981"/>
  <text x="75" y="349" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#1f2937">Cleanliness:</text>
  <text x="155" y="349" font-family="system-ui, sans-serif" font-size="11" fill="#4b5563">Remove irrelevant info, normalize text, ensure consistent formatting</text>

  <circle cx="60" cy="380" r="4" fill="#10b981"/>
  <text x="75" y="384" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#1f2937">Balance:</text>
  <text x="135" y="384" font-family="system-ui, sans-serif" font-size="11" fill="#4b5563">Ensure representation across topics to prevent bias</text>

  <circle cx="60" cy="415" r="4" fill="#ef4444"/>
  <text x="75" y="419" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#991b1b">Enterprise Critical:</text>
  <text x="200" y="419" font-family="system-ui, sans-serif" font-size="11" fill="#4b5563">PII scrubbing is mandatory â€” training on customer data is a security failure</text>
</svg>
