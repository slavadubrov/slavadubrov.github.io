<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 900 500" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="loraGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#3b82f6"/>
      <stop offset="100%" stop-color="#1d4ed8"/>
    </linearGradient>
    <linearGradient id="doraGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" stop-color="#8b5cf6"/>
      <stop offset="100%" stop-color="#6d28d9"/>
    </linearGradient>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#8b5cf6"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="500" fill="#fafafa"/>

  <!-- Title -->
  <text x="450" y="35" font-family="system-ui, -apple-system, sans-serif" font-size="20" font-weight="600" text-anchor="middle" fill="#1a202c">DoRA: Weight-Decomposed Low-Rank Adaptation</text>

  <!-- Left side: Standard LoRA -->
  <text x="200" y="70" font-family="system-ui, sans-serif" font-size="16" font-weight="600" text-anchor="middle" fill="#1e40af">Standard LoRA</text>

  <!-- Frozen Weight Matrix -->
  <rect x="80" y="90" width="240" height="70" rx="6" fill="#e5e7eb" stroke="#9ca3af" stroke-width="1.5"/>
  <text x="200" y="125" font-family="system-ui, sans-serif" font-size="14" font-weight="600" text-anchor="middle" fill="#374151">W (Frozen)</text>
  <text x="200" y="145" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#6b7280">Pre-trained weights (d × d)</text>

  <!-- Plus sign -->
  <text x="330" y="135" font-family="system-ui, sans-serif" font-size="24" font-weight="600" fill="#3b82f6">+</text>

  <!-- LoRA matrices -->
  <rect x="80" y="180" width="100" height="50" rx="4" fill="url(#loraGrad)"/>
  <text x="130" y="205" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">Matrix B (r×d)</text>
  <text x="130" y="220" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">trainable</text>

  <text x="195" y="210" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#3b82f6">×</text>

  <rect x="220" y="180" width="100" height="50" rx="4" fill="url(#loraGrad)"/>
  <text x="270" y="205" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">Matrix A (d×r)</text>
  <text x="270" y="220" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">trainable</text>

  <!-- Formula -->
  <text x="200" y="260" font-family="system-ui, sans-serif" font-size="13" font-weight="600" text-anchor="middle" fill="#1f2937">W' = W + B × A</text>

  <!-- Divider -->
  <line x1="450" y1="70" x2="450" y2="280" stroke="#d1d5db" stroke-width="2"/>

  <!-- Right side: DoRA -->
  <text x="680" y="70" font-family="system-ui, sans-serif" font-size="16" font-weight="600" text-anchor="middle" fill="#6d28d9">DoRA (Weight Decomposition)</text>

  <!-- Frozen Weight Matrix -->
  <rect x="560" y="90" width="240" height="50" rx="6" fill="#e5e7eb" stroke="#9ca3af" stroke-width="1.5"/>
  <text x="680" y="115" font-family="system-ui, sans-serif" font-size="13" font-weight="600" text-anchor="middle" fill="#374151">W → Magnitude × Direction</text>
  <text x="680" y="132" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#8b5cf6">Decomposed</text>

  <!-- Arrow -->
  <path d="M 680 145 L 680 165" stroke="#8b5cf6" stroke-width="2" fill="none" marker-end="url(#arrow)"/>

  <!-- Magnitude -->
  <rect x="500" y="175" width="130" height="50" rx="4" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="565" y="198" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="#92400e">‖W‖ (Magnitude)</text>
  <text x="565" y="215" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="#b45309">trainable scalar</text>

  <text x="645" y="205" font-family="system-ui, sans-serif" font-size="18" font-weight="600" fill="#8b5cf6">×</text>

  <!-- Direction -->
  <rect x="670" y="175" width="130" height="50" rx="4" fill="url(#doraGrad)"/>
  <text x="735" y="195" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">Direction (V)</text>
  <text x="735" y="212" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.8)">V + B×A (LoRA)</text>

  <!-- Formula -->
  <text x="680" y="260" font-family="system-ui, sans-serif" font-size="13" font-weight="600" text-anchor="middle" fill="#1f2937">W' = m × (V + B × A)</text>

  <!-- Comparison Box -->
  <rect x="50" y="300" width="800" height="170" rx="8" fill="#faf5ff" stroke="#8b5cf6" stroke-width="1.5"/>
  <text x="70" y="330" font-family="system-ui, sans-serif" font-size="14" font-weight="600" fill="#5b21b6">Why DoRA Outperforms Standard LoRA</text>

  <circle cx="70" cy="360" r="4" fill="#8b5cf6"/>
  <text x="85" y="364" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#1f2937">Richer Updates:</text>
  <text x="185" y="364" font-family="system-ui, sans-serif" font-size="11" fill="#4b5563">Separating magnitude and direction enables more substantial parameter changes</text>

  <circle cx="70" cy="390" r="4" fill="#8b5cf6"/>
  <text x="85" y="394" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#1f2937">Near Full FT Quality:</text>
  <text x="220" y="394" font-family="system-ui, sans-serif" font-size="11" fill="#4b5563">Achieves learning outcomes closer to full fine-tuning on complex reasoning</text>

  <circle cx="70" cy="420" r="4" fill="#8b5cf6"/>
  <text x="85" y="424" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#1f2937">Same Efficiency:</text>
  <text x="195" y="424" font-family="system-ui, sans-serif" font-size="11" fill="#4b5563">Maintains ~10x memory savings (only magnitude scalars + LoRA matrices trainable)</text>

  <!-- When to use -->
  <rect x="70" y="445" width="760" height="25" rx="4" fill="#ede9fe"/>
  <text x="85" y="462" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#5b21b6">Use DoRA when:</text>
  <text x="190" y="462" font-family="system-ui, sans-serif" font-size="11" fill="#4b5563">Standard LoRA hits a performance ceiling on complex tasks, or you need near-full-fine-tuning quality</text>
</svg>
