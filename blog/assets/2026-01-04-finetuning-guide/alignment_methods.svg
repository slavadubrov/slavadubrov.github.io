<?xml version="1.0" encoding="UTF-8"?>
<svg viewBox="0 0 900 420" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="sftGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#3b82f6"/>
      <stop offset="100%" stop-color="#1d4ed8"/>
    </linearGradient>
    <linearGradient id="dpoGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#8b5cf6"/>
      <stop offset="100%" stop-color="#6d28d9"/>
    </linearGradient>
    <linearGradient id="orpoGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" stop-color="#10b981"/>
      <stop offset="100%" stop-color="#059669"/>
    </linearGradient>
    <marker id="arrow" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#6b7280"/>
    </marker>
    <marker id="arrowPurple" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#8b5cf6"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="420" fill="#fafafa"/>

  <!-- Title -->
  <text x="450" y="30" font-family="system-ui, -apple-system, sans-serif" font-size="20" font-weight="600" text-anchor="middle" fill="#1a202c">Alignment Methods: From PPO to ORPO</text>

  <!-- Traditional RLHF -->
  <text x="60" y="65" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#6b7280">Traditional (RLHF):</text>

  <rect x="60" y="80" width="130" height="45" rx="6" fill="url(#sftGrad)"/>
  <text x="125" y="105" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">1. SFT</text>
  <text x="125" y="118" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">Learn task</text>

  <path d="M 190 102 L 220 102" stroke="#6b7280" stroke-width="1.5" fill="none" marker-end="url(#arrow)"/>

  <rect x="230" y="80" width="130" height="45" rx="6" fill="#fbbf24"/>
  <text x="295" y="105" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">2. Reward Model</text>
  <text x="295" y="118" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">Learn preferences</text>

  <path d="M 360 102 L 390 102" stroke="#6b7280" stroke-width="1.5" fill="none" marker-end="url(#arrow)"/>

  <rect x="400" y="80" width="130" height="45" rx="6" fill="#ef4444"/>
  <text x="465" y="105" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">3. PPO (RL)</text>
  <text x="465" y="118" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">Optimize policy</text>

  <text x="560" y="98" font-family="system-ui, sans-serif" font-size="10" fill="#dc2626">❌ Complex</text>
  <text x="560" y="112" font-family="system-ui, sans-serif" font-size="10" fill="#dc2626">❌ Expensive</text>

  <!-- Divider -->
  <line x1="60" y1="150" x2="850" y2="150" stroke="#e5e7eb" stroke-width="1.5"/>

  <!-- Modern DPO -->
  <text x="60" y="175" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#6b7280">Modern (DPO):</text>

  <rect x="60" y="190" width="130" height="45" rx="6" fill="url(#sftGrad)"/>
  <text x="125" y="215" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">1. SFT</text>
  <text x="125" y="228" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">Learn task</text>

  <path d="M 190 212 L 220 212" stroke="#8b5cf6" stroke-width="2" fill="none" marker-end="url(#arrowPurple)"/>

  <rect x="230" y="190" width="130" height="45" rx="6" fill="url(#dpoGrad)"/>
  <text x="295" y="215" font-family="system-ui, sans-serif" font-size="11" font-weight="600" text-anchor="middle" fill="white">2. DPO</text>
  <text x="295" y="228" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">Direct preference</text>

  <text x="395" y="205" font-family="system-ui, sans-serif" font-size="10" fill="#059669">✓ Simpler</text>
  <text x="395" y="220" font-family="system-ui, sans-serif" font-size="10" fill="#059669">✓ More stable</text>
  <text x="395" y="235" font-family="system-ui, sans-serif" font-size="10" fill="#059669">✓ Less compute</text>

  <!-- Divider -->
  <line x1="60" y1="260" x2="850" y2="260" stroke="#e5e7eb" stroke-width="1.5"/>

  <!-- Newest ORPO -->
  <text x="60" y="285" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#6b7280">Newest (ORPO):</text>

  <rect x="60" y="300" width="200" height="50" rx="6" fill="url(#orpoGrad)"/>
  <text x="160" y="322" font-family="system-ui, sans-serif" font-size="12" font-weight="600" text-anchor="middle" fill="white">ORPO (One-Stage)</text>
  <text x="160" y="340" font-family="system-ui, sans-serif" font-size="9" text-anchor="middle" fill="rgba(255,255,255,0.9)">SFT + Alignment Combined</text>

  <text x="290" y="315" font-family="system-ui, sans-serif" font-size="10" fill="#059669">✓ Single training stage</text>
  <text x="290" y="330" font-family="system-ui, sans-serif" font-size="10" fill="#059669">✓ No separate SFT</text>
  <text x="290" y="345" font-family="system-ui, sans-serif" font-size="10" fill="#059669">✓ Fastest to production</text>

  <!-- Recommendation Box -->
  <rect x="530" y="280" width="310" height="80" rx="6" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="685" y="305" font-family="system-ui, sans-serif" font-size="12" font-weight="600" text-anchor="middle" fill="#92400e">2025 Recommendation</text>
  <text x="685" y="325" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#78350f">Start with ORPO for most use cases</text>
  <text x="685" y="340" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#78350f">Fall back to DPO for more control</text>
  <text x="685" y="355" font-family="system-ui, sans-serif" font-size="10" text-anchor="middle" fill="#78350f">PPO only for specialized tasks (code gen)</text>

  <!-- Legend -->
  <rect x="60" y="375" width="780" height="35" rx="4" fill="#f3f4f6"/>
  <text x="80" y="397" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="#374151">Key:</text>
  <text x="115" y="397" font-family="system-ui, sans-serif" font-size="10" fill="#4b5563">SFT = Supervised Fine-Tuning</text>
  <text x="300" y="397" font-family="system-ui, sans-serif" font-size="10" fill="#4b5563">DPO = Direct Preference Optimization</text>
  <text x="530" y="397" font-family="system-ui, sans-serif" font-size="10" fill="#4b5563">ORPO = Odds-Ratio Preference Optimization</text>
</svg>
