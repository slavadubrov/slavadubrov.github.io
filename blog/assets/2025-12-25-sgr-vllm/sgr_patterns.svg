<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600">
  <defs>
    <linearGradient id="cascadeGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="routingGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#6d28d9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="cycleGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#ec4899;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#be185d;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="4" stdDeviation="4" flood-opacity="0.15"/>
    </filter>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b5cf6"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="900" height="600" fill="#0f172a"/>

  <!-- Title -->
  <text x="450" y="40" font-family="system-ui, -apple-system, sans-serif" font-size="24" font-weight="bold" fill="#f8fafc" text-anchor="middle">SGR Patterns</text>

  <!-- Pattern 1: Cascade -->
  <g transform="translate(30, 70)">
    <rect x="0" y="0" width="260" height="500" rx="16" fill="#1e293b" stroke="#3b82f6" stroke-width="2" filter="url(#shadow)"/>

    <!-- Header -->
    <rect x="0" y="0" width="260" height="50" rx="16" fill="url(#cascadeGrad)"/>
    <text x="130" y="33" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="white" text-anchor="middle">ðŸ“Š Cascade</text>

    <!-- Description -->
    <text x="20" y="75" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">Sequential reasoning steps</text>
    <text x="20" y="92" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">Output flows to next stage</text>

    <!-- Flow diagram -->
    <rect x="30" y="115" width="200" height="45" rx="8" fill="#1e40af" stroke="#3b82f6" stroke-width="1"/>
    <text x="130" y="135" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">1. brief_summary</text>
    <text x="130" y="150" font-family="monospace" font-size="9" fill="#93c5fd" text-anchor="middle">str - Context analysis</text>

    <path d="M130,160 L130,190" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>

    <rect x="30" y="190" width="200" height="45" rx="8" fill="#1e40af" stroke="#3b82f6" stroke-width="1"/>
    <text x="130" y="210" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">2. rate_skill_match</text>
    <text x="130" y="225" font-family="monospace" font-size="9" fill="#93c5fd" text-anchor="middle">int [1-10] - Rating</text>

    <path d="M130,235 L130,265" stroke="#3b82f6" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>

    <rect x="30" y="265" width="200" height="45" rx="8" fill="#1e40af" stroke="#3b82f6" stroke-width="1"/>
    <text x="130" y="285" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">3. final_recommendation</text>
    <text x="130" y="300" font-family="monospace" font-size="9" fill="#93c5fd" text-anchor="middle">Literal["hire","reject","hold"]</text>

    <!-- Use case -->
    <line x1="20" y1="330" x2="240" y2="330" stroke="#334155" stroke-width="1"/>
    <text x="20" y="355" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#60a5fa">Use Case:</text>
    <text x="20" y="375" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">â€¢ Candidate evaluation</text>
    <text x="20" y="393" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">â€¢ Document classification</text>
    <text x="20" y="411" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">â€¢ Compliance analysis</text>

    <!-- Key benefit -->
    <rect x="20" y="430" width="220" height="50" rx="8" fill="#172554" stroke="#3b82f6" stroke-width="1"/>
    <text x="130" y="455" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#93c5fd" text-anchor="middle">ðŸ’¡ Forces analysis before</text>
    <text x="130" y="472" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#93c5fd" text-anchor="middle">decision - no shortcuts!</text>
  </g>

  <!-- Pattern 2: Routing -->
  <g transform="translate(320, 70)">
    <rect x="0" y="0" width="260" height="500" rx="16" fill="#1e293b" stroke="#8b5cf6" stroke-width="2" filter="url(#shadow)"/>

    <!-- Header -->
    <rect x="0" y="0" width="260" height="50" rx="16" fill="url(#routingGrad)"/>
    <text x="130" y="33" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="white" text-anchor="middle">ðŸ”€ Routing</text>

    <!-- Description -->
    <text x="20" y="75" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">Semantic switch statement</text>
    <text x="20" y="92" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">Union types for branching</text>

    <!-- Flow diagram - Router -->
    <rect x="75" y="115" width="110" height="40" rx="8" fill="#5b21b6" stroke="#8b5cf6" stroke-width="1"/>
    <text x="130" y="140" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">RouterSchema</text>

    <!-- Branches -->
    <path d="M100,155 L60,185" stroke="#8b5cf6" stroke-width="2" fill="none" marker-end="url(#arrowPurple)"/>
    <path d="M160,155 L200,185" stroke="#8b5cf6" stroke-width="2" fill="none" marker-end="url(#arrowPurple)"/>

    <rect x="15" y="195" width="100" height="55" rx="8" fill="#4c1d95" stroke="#a78bfa" stroke-width="1"/>
    <text x="65" y="215" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white" text-anchor="middle">FeatureLookup</text>
    <text x="65" y="232" font-family="monospace" font-size="8" fill="#c4b5fd" text-anchor="middle">tool: "fetch_user"</text>
    <text x="65" y="244" font-family="monospace" font-size="8" fill="#c4b5fd" text-anchor="middle">user_id: str</text>

    <rect x="145" y="195" width="100" height="55" rx="8" fill="#4c1d95" stroke="#a78bfa" stroke-width="1"/>
    <text x="195" y="215" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white" text-anchor="middle">GeneralResponse</text>
    <text x="195" y="232" font-family="monospace" font-size="8" fill="#c4b5fd" text-anchor="middle">tool: "respond"</text>
    <text x="195" y="244" font-family="monospace" font-size="8" fill="#c4b5fd" text-anchor="middle">content: str</text>

    <!-- Code snippet -->
    <rect x="20" y="265" width="220" height="55" rx="6" fill="#0f172a" stroke="#475569" stroke-width="1"/>
    <text x="30" y="283" font-family="monospace" font-size="9" fill="#c4b5fd">class RouterSchema(BaseModel):</text>
    <text x="30" y="298" font-family="monospace" font-size="9" fill="#a78bfa">  action: Union[</text>
    <text x="30" y="313" font-family="monospace" font-size="9" fill="#a78bfa">    FeatureLookup, GeneralResponse]</text>

    <!-- Use case -->
    <line x1="20" y1="330" x2="240" y2="330" stroke="#334155" stroke-width="1"/>
    <text x="20" y="355" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#a78bfa">Use Case:</text>
    <text x="20" y="375" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">â€¢ Intent classification</text>
    <text x="20" y="393" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">â€¢ Tool selection</text>
    <text x="20" y="411" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">â€¢ Support triage</text>

    <!-- Key benefit -->
    <rect x="20" y="430" width="220" height="50" rx="8" fill="#2e1065" stroke="#8b5cf6" stroke-width="1"/>
    <text x="130" y="455" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#c4b5fd" text-anchor="middle">ðŸ’¡ LLM must pick exactly</text>
    <text x="130" y="472" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#c4b5fd" text-anchor="middle">ONE valid branch</text>
  </g>

  <!-- Pattern 3: Cycle -->
  <g transform="translate(610, 70)">
    <rect x="0" y="0" width="260" height="500" rx="16" fill="#1e293b" stroke="#ec4899" stroke-width="2" filter="url(#shadow)"/>

    <!-- Header -->
    <rect x="0" y="0" width="260" height="50" rx="16" fill="url(#cycleGrad)"/>
    <text x="130" y="33" font-family="system-ui, sans-serif" font-size="16" font-weight="700" fill="white" text-anchor="middle">ðŸ”„ Cycle</text>

    <!-- Description -->
    <text x="20" y="75" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">Repeated reasoning with Lists</text>
    <text x="20" y="92" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">Min/Max constraints on items</text>

    <!-- Flow diagram - List of items -->
    <rect x="60" y="115" width="140" height="35" rx="8" fill="#9d174d" stroke="#ec4899" stroke-width="1"/>
    <text x="130" y="137" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="white" text-anchor="middle">List[RiskFactor]</text>

    <!-- Items -->
    <rect x="30" y="165" width="80" height="50" rx="6" fill="#831843" stroke="#f472b6" stroke-width="1"/>
    <text x="70" y="185" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white" text-anchor="middle">Factor 1</text>
    <text x="70" y="200" font-family="monospace" font-size="8" fill="#fbcfe8" text-anchor="middle">severity: high</text>

    <rect x="120" y="165" width="50" height="50" rx="6" fill="#831843" stroke="#f472b6" stroke-width="1"/>
    <text x="145" y="195" font-family="system-ui, sans-serif" font-size="14" fill="#f9a8d4" text-anchor="middle">...</text>

    <rect x="180" y="165" width="50" height="50" rx="6" fill="#831843" stroke="#f472b6" stroke-width="1"/>
    <text x="205" y="185" font-family="system-ui, sans-serif" font-size="10" font-weight="600" fill="white" text-anchor="middle">Factor N</text>
    <text x="205" y="200" font-family="monospace" font-size="8" fill="#fbcfe8" text-anchor="middle">2 â‰¤ N â‰¤ 4</text>

    <!-- Code snippet -->
    <rect x="20" y="230" width="220" height="75" rx="6" fill="#0f172a" stroke="#475569" stroke-width="1"/>
    <text x="30" y="248" font-family="monospace" font-size="9" fill="#f9a8d4">class RiskFactor(BaseModel):</text>
    <text x="30" y="263" font-family="monospace" font-size="9" fill="#f472b6">  explanation: str</text>
    <text x="30" y="278" font-family="monospace" font-size="9" fill="#f472b6">  severity: Literal["low",</text>
    <text x="30" y="293" font-family="monospace" font-size="9" fill="#f472b6">                    "medium","high"]</text>

    <!-- Use case -->
    <line x1="20" y1="320" x2="240" y2="320" stroke="#334155" stroke-width="1"/>
    <text x="20" y="345" font-family="system-ui, sans-serif" font-size="12" font-weight="600" fill="#f472b6">Use Case:</text>
    <text x="20" y="365" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">â€¢ Risk assessment</text>
    <text x="20" y="383" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">â€¢ Multi-issue extraction</text>
    <text x="20" y="401" font-family="system-ui, sans-serif" font-size="11" fill="#94a3b8">â€¢ Parallel tool calls</text>

    <!-- Key benefit -->
    <rect x="20" y="430" width="220" height="50" rx="8" fill="#500724" stroke="#ec4899" stroke-width="1"/>
    <text x="130" y="455" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#fbcfe8" text-anchor="middle">ðŸ’¡ Enforce min/max items</text>
    <text x="130" y="472" font-family="system-ui, sans-serif" font-size="11" font-weight="600" fill="#fbcfe8" text-anchor="middle">with annotations</text>
  </g>
</svg>
